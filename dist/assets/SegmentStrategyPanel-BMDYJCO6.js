import{d as g,e as s,f as n,g as e,r as u,o as N,b as C,h as b,i as r,j as x,t as v,F as T,k as I,D as A}from"./index-BGyiXXhD.js";import{_ as d}from"./_plugin-vue_export-helper-DlAUqK2U.js";import H from"./SegmentAccuracyBreakdown-fI2EJ6d-.js";import L from"./SegmentAccuracyChart-BpfmILb1.js";import"./auto-BxYDYnC4.js";import"./chart-DUPVkyAx.js";const w={class:"strategy-accuracy"},D=g({__name:"StrategyAccuracy",setup(c){return(l,t)=>(n(),s("div",w,[...t[0]||(t[0]=[e("h3",null,"Strategy Accuracy",-1),e("p",null,"Coming soon...",-1)])]))}}),J=d(D,[["__scopeId","data-v-c7a62a05"]]),O={class:"strategy-accuracy-trend"},V=g({__name:"StrategyAccuracyTrend",setup(c){return(l,t)=>(n(),s("div",O,[...t[0]||(t[0]=[e("h3",null,"Strategy Accuracy Trend",-1),e("p",null,"Coming soon...",-1)])]))}}),j=d(V,[["__scopeId","data-v-f47a6db2"]]),B={class:"suggested-campaign-card"},G=g({__name:"SuggestedCampaignCard",setup(c){return(l,t)=>(n(),s("div",B,[...t[0]||(t[0]=[e("h4",null,"Suggested Campaign",-1),e("p",null,"Coming soon...",-1)])]))}}),R=d(G,[["__scopeId","data-v-def4a0a3"]]),U={class:"suggestion-history-table"},z=g({__name:"SuggestionHistoryTable",setup(c){return(l,t)=>(n(),s("div",U,[...t[0]||(t[0]=[e("h4",null,"Suggestion History",-1),e("p",null,"Coming soon...",-1)])]))}}),F=d(z,[["__scopeId","data-v-7ce8fc6d"]]),E={class:"suggestion-deviation-table"},M=g({__name:"SuggestionDeviationTable",setup(c){return(l,t)=>(n(),s("div",E,[...t[0]||(t[0]=[e("h4",null,"Suggestion Deviation",-1),e("p",null,"Coming soon...",-1)])]))}}),P=d(M,[["__scopeId","data-v-fa82e0e9"]]),Y=["disabled"],q={key:0},K={key:1},Q={key:0},W={key:1},nt={__name:"SegmentStrategyPanel",setup(c){const l=u(null),t=u("Yükleniyor..."),_=u([]),h=u(null),p=u(!1);async function $(){p.value=!0;try{const o=await A.post("/api/admin/refresh-campaign-strategy");l.value=o.data.weights,h.value=o.data.suggestion;const a=new Date().toLocaleString("tr-TR");t.value=a,k(a,o.data.weights);const i=JSON.parse(localStorage.getItem("accuracyLog")||"{}");i[a]=o.data.accuracy_percent,localStorage.setItem("accuracyLog",JSON.stringify(i))}catch(o){console.error("Strateji güncellemesi başarısız:",o)}finally{p.value=!1}}function k(o,a){localStorage.setItem("lastStrategyUpdate",o);const i=JSON.parse(localStorage.getItem("strategyHistory")||"[]"),m=[o,...i].slice(0,10);localStorage.setItem("strategyHistory",JSON.stringify(m)),_.value=m;const y=JSON.parse(localStorage.getItem("weightsLog")||"{}");y[o]=a,localStorage.setItem("weightsLog",JSON.stringify(y))}return N(()=>{t.value=localStorage.getItem("lastStrategyUpdate")||"Henüz güncellenmedi",_.value=JSON.parse(localStorage.getItem("strategyHistory")||"[]")}),(o,a)=>{const i=C("CalibratedConfidenceTable"),m=C("ABTestResultTable"),y=C("StrategyVersionComparison");return n(),s("div",null,[a[3]||(a[3]=e("h2",null,"Segment Strateji Durumu",-1)),e("p",null,[a[0]||(a[0]=x("Son strateji güncellemesi: ",-1)),e("strong",null,v(t.value),1)]),e("button",{onClick:$,disabled:p.value},[p.value?(n(),s("span",q,"Güncelleniyor...")):(n(),s("span",K,"Stratejiyi Güncelle"))],8,Y),l.value?(n(),s("div",Q,[a[1]||(a[1]=e("h3",null,"Segment Ağırlıkları",-1)),e("ul",null,[(n(!0),s(T,null,I(l.value,(f,S)=>(n(),s("li",{key:S},v(S)+": "+v(f),1))),128))])])):b("",!0),r(J),r(H),r(L),r(j),r(R,{suggestion:h.value},null,8,["suggestion"]),r(F),r(P),r(i),r(m),r(y),_.value.length?(n(),s("div",W,[a[2]||(a[2]=e("h3",null,"Güncelleme Geçmişi",-1)),e("ul",null,[(n(!0),s(T,null,I(_.value,(f,S)=>(n(),s("li",{key:S},v(f),1))),128))])])):b("",!0)])}}};export{nt as default};
