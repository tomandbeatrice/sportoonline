import{r as V,d as _,A as M,y as j,u as F,B as L,c as z,b as K,e as d,f as n,g as e,n as m,h as x,q as i,v as u,m as h,C,i as U,w as q,j as E,t as c,F as B,k as D,z as Y}from"./index-BGyiXXhD.js";import{u as G}from"./orderStore-gyM1lcKy.js";function O(){const p=new Map,g=(a,r,b)=>{p.set(a,{value:r,rules:b,error:V(""),touched:V(!1)})},f=a=>{const r=p.get(a);if(!r)return!0;r.touched.value=!0,r.error.value="";for(const b of r.rules)if(!b.test(r.value.value))return r.error.value=b.message,!1;return!0},w=()=>{let a=!0;for(const[r]of p)f(r)||(a=!1);return a},o=a=>{const r=p.get(a);r&&(r.error.value="",r.touched.value=!1)};return{registerField:g,validateField:f,validateAll:w,resetField:o,resetAll:()=>{for(const[a]of p)o(a)},getFieldError:a=>p.get(a)?.error.value||"",isFieldTouched:a=>p.get(a)?.touched.value||!1}}const P={class:"min-h-screen bg-slate-50 pb-12 pt-6 font-sans"},R={class:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"},H={class:"mb-10"},$={class:"relative after:absolute after:inset-x-0 after:top-1/2 after:block after:h-0.5 after:-translate-y-1/2 after:rounded-lg after:bg-slate-200"},I={class:"relative z-10 flex justify-between text-sm font-medium text-slate-500"},J={class:"lg:grid lg:grid-cols-12 lg:gap-x-12 lg:items-start"},Q={class:"lg:col-span-7"},W={key:0,class:"space-y-6"},X={class:"rounded-2xl bg-white p-6 shadow-sm border border-slate-100"},Z={class:"grid grid-cols-1 gap-y-6 sm:grid-cols-2 sm:gap-x-4"},ee={class:"sm:col-span-2"},te={class:"sm:col-span-2"},se={class:"sm:col-span-2"},le={key:1,class:"space-y-6"},oe={class:"rounded-2xl bg-white p-6 shadow-sm border border-slate-100"},ae={class:"space-y-4"},re={key:0,class:"h-5 w-5 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20"},de={key:0,class:"h-5 w-5 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20"},ne={key:2,class:"space-y-6"},ie={class:"rounded-2xl bg-white p-6 shadow-sm border border-slate-100"},ue={class:"grid grid-cols-1 gap-y-6 sm:grid-cols-2 sm:gap-x-4"},me={class:"sm:col-span-2"},pe={class:"flex gap-4"},be={class:"flex-1"},xe={class:"flex-1"},ce={key:3,class:"space-y-6"},fe={class:"rounded-2xl bg-white p-6 shadow-sm border border-slate-100 text-center py-12"},ge={class:"mt-8"},ve={key:4,class:"mt-8 flex justify-between"},he={key:1},we={key:0,class:"mt-10 lg:col-span-5 lg:mt-0"},ye={class:"sticky top-24 rounded-2xl bg-white p-6 shadow-sm border border-slate-100"},ke={class:"divide-y divide-slate-100"},ze={class:"h-16 w-16 flex-shrink-0 overflow-hidden rounded-lg border border-slate-200"},Ve=["src","alt"],Ce={class:"ml-4 flex flex-1 flex-col"},Se={class:"flex justify-between text-base font-medium text-slate-900"},Te={class:"ml-4"},Ne={class:"mt-1 text-sm text-slate-500"},Ae={class:"flex flex-1 items-end justify-between text-sm"},_e={class:"text-slate-500"},Me={class:"mt-6 space-y-4 border-t border-slate-100 pt-6"},je={class:"flex items-center justify-between"},Fe={class:"text-sm font-medium text-slate-900"},Le={class:"flex items-center justify-between"},Ke={class:"text-sm font-medium text-slate-900"},Ue={class:"flex items-center justify-between border-t border-slate-100 pt-4"},qe={class:"text-xl font-bold text-blue-600"},De=_({__name:"Checkout",setup(p){const g=M(),f=j(),w=G();F();const o=V(1),l=L({addressTitle:"",firstName:"",lastName:"",address:"",city:"",zipCode:"",phone:"",shippingMethod:"standard",cardNumber:"",cardName:"",cardExpiry:"",cardCvv:""}),{validate:y}=O(),k=z(()=>f.subtotal),a=z(()=>l.shippingMethod==="express"?29.9:0),r=z(()=>(k.value+a.value).toFixed(2)),b=v=>new Intl.NumberFormat("tr-TR",{minimumFractionDigits:2}).format(v),S=()=>y(l,{firstName:[{rule:"required",message:"Ad alanı zorunludur"}],lastName:[{rule:"required",message:"Soyad alanı zorunludur"}],address:[{rule:"required",message:"Adres alanı zorunludur"},{rule:"minLength",value:10,message:"Adres en az 10 karakter olmalıdır"}],city:[{rule:"required",message:"Şehir alanı zorunludur"}],phone:[{rule:"required",message:"Telefon alanı zorunludur"},{rule:"phone",message:"Geçerli bir telefon numarası girin"}]}),T=()=>y(l,{cardNumber:[{rule:"required",message:"Kart numarası zorunludur"},{rule:"minLength",value:16,message:"Kart numarası 16 haneli olmalıdır"}],cardName:[{rule:"required",message:"Kart üzerindeki isim zorunludur"}],cardExpiry:[{rule:"required",message:"Son kullanma tarihi zorunludur"},{rule:"pattern",value:/^\d{2}\/\d{2}$/,message:"Format: MM/YY"}],cardCvv:[{rule:"required",message:"CVV zorunludur"},{rule:"minLength",value:3,message:"CVV 3 haneli olmalıdır"}]}),N=()=>{if(o.value===1&&!S()){g.warning("Lütfen formu eksiksiz doldurun");return}if(o.value===3){if(!T()){g.warning("Lütfen ödeme bilgilerini kontrol edin");return}g.info("Ödeme işleniyor...",{timeout:2e3}),setTimeout(()=>{w.createOrder(f.items,Number(r.value),l),o.value=4,f.clearCart(),g.success("Siparişiniz başarıyla oluşturuldu!")},2e3);return}o.value++,window.scrollTo({top:0,behavior:"smooth"})};return(v,t)=>{const A=K("router-link");return n(),d("div",P,[e("div",R,[t[44]||(t[44]=e("h1",{class:"sr-only"},"Ödeme Sayfası",-1)),e("div",H,[e("div",$,[e("ol",I,[e("li",{class:m(["flex items-center gap-2 bg-slate-50 p-2",{"text-blue-600":o.value>=1}])},[e("span",{class:m(["flex h-6 w-6 items-center justify-center rounded-full text-xs font-bold",o.value>=1?"bg-blue-600 text-white":"bg-slate-200 text-slate-600"])},"1",2),t[14]||(t[14]=e("span",{class:"hidden sm:block"},"Adres Bilgileri",-1))],2),e("li",{class:m(["flex items-center gap-2 bg-slate-50 p-2",{"text-blue-600":o.value>=2}])},[e("span",{class:m(["flex h-6 w-6 items-center justify-center rounded-full text-xs font-bold",o.value>=2?"bg-blue-600 text-white":"bg-slate-200 text-slate-600"])},"2",2),t[15]||(t[15]=e("span",{class:"hidden sm:block"},"Kargo Seçimi",-1))],2),e("li",{class:m(["flex items-center gap-2 bg-slate-50 p-2",{"text-blue-600":o.value>=3}])},[e("span",{class:m(["flex h-6 w-6 items-center justify-center rounded-full text-xs font-bold",o.value>=3?"bg-blue-600 text-white":"bg-slate-200 text-slate-600"])},"3",2),t[16]||(t[16]=e("span",{class:"hidden sm:block"},"Ödeme",-1))],2),e("li",{class:m(["flex items-center gap-2 bg-slate-50 p-2",{"text-blue-600":o.value>=4}])},[e("span",{class:m(["flex h-6 w-6 items-center justify-center rounded-full text-xs font-bold",o.value>=4?"bg-blue-600 text-white":"bg-slate-200 text-slate-600"])},"4",2),t[17]||(t[17]=e("span",{class:"hidden sm:block"},"Onay",-1))],2)])])]),e("div",J,[e("div",Q,[o.value===1?(n(),d("div",W,[e("div",X,[t[25]||(t[25]=e("h2",{class:"text-lg font-bold text-slate-900 mb-4"},"Teslimat Adresi",-1)),e("div",Z,[e("div",ee,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-slate-700"},"Adres Başlığı",-1)),i(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>l.addressTitle=s),type:"text",class:"mt-1 block w-full rounded-lg border-slate-200 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",placeholder:"Ev, İş vb."},null,512),[[u,l.addressTitle]])]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-slate-700"},"Ad",-1)),i(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>l.firstName=s),type:"text",class:"mt-1 block w-full rounded-lg border-slate-200 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[u,l.firstName]])]),e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-slate-700"},"Soyad",-1)),i(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>l.lastName=s),type:"text",class:"mt-1 block w-full rounded-lg border-slate-200 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[u,l.lastName]])]),e("div",te,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-slate-700"},"Adres",-1)),i(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=s=>l.address=s),rows:"3",class:"mt-1 block w-full rounded-lg border-slate-200 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[u,l.address]])]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-slate-700"},"Şehir",-1)),i(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>l.city=s),type:"text",class:"mt-1 block w-full rounded-lg border-slate-200 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[u,l.city]])]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-slate-700"},"Posta Kodu",-1)),i(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>l.zipCode=s),type:"text",class:"mt-1 block w-full rounded-lg border-slate-200 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[u,l.zipCode]])]),e("div",se,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-slate-700"},"Telefon",-1)),i(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>l.phone=s),type:"tel",class:"mt-1 block w-full rounded-lg border-slate-200 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[u,l.phone]])])])])])):x("",!0),o.value===2?(n(),d("div",le,[e("div",oe,[t[32]||(t[32]=e("h2",{class:"text-lg font-bold text-slate-900 mb-4"},"Kargo Seçimi",-1)),e("div",ae,[e("label",{class:m(["relative flex cursor-pointer rounded-xl border p-4 shadow-sm focus:outline-none",l.shippingMethod==="standard"?"border-blue-500 ring-2 ring-blue-500":"border-slate-200"])},[i(e("input",{type:"radio",name:"shipping-method",value:"standard","onUpdate:modelValue":t[7]||(t[7]=s=>l.shippingMethod=s),class:"sr-only"},null,512),[[C,l.shippingMethod]]),t[27]||(t[27]=h('<span class="flex flex-1"><span class="flex flex-col"><span class="block text-sm font-medium text-slate-900">Standart Kargo</span><span class="mt-1 flex items-center text-sm text-slate-500">3-5 iş günü içinde teslimat</span><span class="mt-6 text-sm font-medium text-slate-900">Ücretsiz</span></span></span>',1)),l.shippingMethod==="standard"?(n(),d("svg",re,[...t[26]||(t[26]=[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)])])):x("",!0),t[28]||(t[28]=e("span",{class:"pointer-events-none absolute -inset-px rounded-xl","aria-hidden":"true"},null,-1))],2),e("label",{class:m(["relative flex cursor-pointer rounded-xl border p-4 shadow-sm focus:outline-none",l.shippingMethod==="express"?"border-blue-500 ring-2 ring-blue-500":"border-slate-200"])},[i(e("input",{type:"radio",name:"shipping-method",value:"express","onUpdate:modelValue":t[8]||(t[8]=s=>l.shippingMethod=s),class:"sr-only"},null,512),[[C,l.shippingMethod]]),t[30]||(t[30]=h('<span class="flex flex-1"><span class="flex flex-col"><span class="block text-sm font-medium text-slate-900">Hızlı Teslimat</span><span class="mt-1 flex items-center text-sm text-slate-500">24 saat içinde teslimat</span><span class="mt-6 text-sm font-medium text-slate-900">29.90 TL</span></span></span>',1)),l.shippingMethod==="express"?(n(),d("svg",de,[...t[29]||(t[29]=[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)])])):x("",!0),t[31]||(t[31]=e("span",{class:"pointer-events-none absolute -inset-px rounded-xl","aria-hidden":"true"},null,-1))],2)])])])):x("",!0),o.value===3?(n(),d("div",ne,[e("div",ie,[t[37]||(t[37]=h('<h2 class="text-lg font-bold text-slate-900 mb-4">Ödeme Bilgileri</h2><div class="mb-6"><div class="flex space-x-4"><button type="button" class="flex-1 rounded-lg border border-blue-600 bg-blue-50 py-2 text-sm font-medium text-blue-700 text-center">Kredi Kartı</button><button type="button" class="flex-1 rounded-lg border border-slate-200 bg-white py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 text-center">Havale / EFT</button></div></div>',2)),e("div",ue,[e("div",me,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-slate-700"},"Kart Numarası",-1)),i(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>l.cardNumber=s),type:"text",placeholder:"0000 0000 0000 0000",class:"mt-1 block w-full rounded-lg border-slate-200 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[u,l.cardNumber]])]),e("div",null,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-slate-700"},"Ad Soyad",-1)),i(e("input",{"onUpdate:modelValue":t[10]||(t[10]=s=>l.cardName=s),type:"text",placeholder:"Kart üzerindeki isim",class:"mt-1 block w-full rounded-lg border-slate-200 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[u,l.cardName]])]),e("div",pe,[e("div",be,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-slate-700"},"SKT",-1)),i(e("input",{"onUpdate:modelValue":t[11]||(t[11]=s=>l.cardExpiry=s),type:"text",placeholder:"AA/YY",class:"mt-1 block w-full rounded-lg border-slate-200 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[u,l.cardExpiry]])]),e("div",xe,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-slate-700"},"CVV",-1)),i(e("input",{"onUpdate:modelValue":t[12]||(t[12]=s=>l.cardCvv=s),type:"text",placeholder:"123",class:"mt-1 block w-full rounded-lg border-slate-200 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[u,l.cardCvv]])])])])])])):x("",!0),o.value===4?(n(),d("div",ce,[e("div",fe,[t[39]||(t[39]=h('<div class="mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-green-100 mb-4"><svg class="h-8 w-8 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div><h2 class="text-2xl font-bold text-slate-900">Siparişiniz Alındı!</h2><p class="mt-2 text-slate-500">Sipariş numaranız: <span class="font-mono font-bold text-slate-900">#SP829304</span></p><p class="mt-1 text-slate-500">Sipariş detayları e-posta adresinize gönderildi.</p>',4)),e("div",ge,[U(A,{to:"/",class:"inline-flex items-center justify-center rounded-xl bg-blue-600 px-6 py-3 text-base font-medium text-white shadow-sm hover:bg-blue-700"},{default:q(()=>[...t[38]||(t[38]=[E(" Alışverişe Devam Et ",-1)])]),_:1})])])])):x("",!0),o.value<4?(n(),d("div",ve,[o.value>1?(n(),d("button",{key:0,onClick:t[13]||(t[13]=s=>o.value--),class:"rounded-xl border border-slate-200 bg-white px-6 py-3 text-sm font-medium text-slate-700 shadow-sm hover:bg-slate-50"}," Geri Dön ")):(n(),d("div",he)),e("button",{onClick:N,class:"rounded-xl bg-blue-600 px-8 py-3 text-sm font-bold text-white shadow-lg shadow-blue-200 hover:bg-blue-700 hover:shadow-blue-300"},c(o.value===3?"Siparişi Tamamla":"Devam Et"),1)])):x("",!0)]),o.value<4?(n(),d("div",we,[e("div",ye,[t[43]||(t[43]=e("h2",{class:"text-lg font-bold text-slate-900 mb-4"},"Sipariş Özeti",-1)),e("ul",ke,[(n(!0),d(B,null,D(Y(f).items,s=>(n(),d("li",{key:s.id,class:"flex py-4"},[e("div",ze,[e("img",{src:s.image_url||s.image,alt:s.name,class:"h-full w-full object-cover object-center"},null,8,Ve)]),e("div",Ce,[e("div",null,[e("div",Se,[e("h3",null,c(s.name),1),e("p",Te,c(b(s.price*s.quantity))+" TL",1)]),e("p",Ne,c(s.category?.name||"Genel"),1)]),e("div",Ae,[e("p",_e,"Adet "+c(s.quantity),1)])])]))),128))]),e("div",Me,[e("div",je,[t[40]||(t[40]=e("p",{class:"text-sm text-slate-600"},"Ara Toplam",-1)),e("p",Fe,c(b(k.value))+" TL",1)]),e("div",Le,[t[41]||(t[41]=e("p",{class:"text-sm text-slate-600"},"Kargo",-1)),e("p",Ke,c(b(a.value))+" TL",1)]),e("div",Ue,[t[42]||(t[42]=e("p",{class:"text-base font-bold text-slate-900"},"Toplam",-1)),e("p",qe,c(r.value)+" TL",1)])])])])):x("",!0)])])])}}});export{De as default};
