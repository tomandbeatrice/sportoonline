import{d as X,r as p,c as tt,o as et,e as d,f as u,g as t,h as O,i as b,j as T,O as y,q as c,v as lt,P as h,m as V,F as C,k as w,t as a,G as Y,n as k,p as st,D as _}from"./index-BGyiXXhD.js";import{_ as at}from"./_plugin-vue_export-helper-DlAUqK2U.js";const nt={class:"order-management"},ot={class:"page-header"},it={class:"header-left"},dt={class:"flex items-center gap-2"},ut={class:"filters-section"},rt={class:"filter-group"},vt={class:"filter-group"},pt={class:"filter-group"},mt={class:"filter-group"},ct={class:"filter-group"},gt=["value"],bt={class:"filter-group"},yt={class:"stats-cards"},kt={class:"stat-card pending"},_t={class:"stat-content"},ft={class:"stat-value"},ht={class:"stat-card processing"},St={class:"stat-content"},xt={class:"stat-value"},Tt={class:"stat-card shipped"},Ct={class:"stat-content"},wt={class:"stat-value"},Bt={class:"stat-card delivered"},Dt={class:"stat-icon"},At={class:"stat-content"},Nt={class:"stat-value"},$t={class:"stat-card total"},Et={class:"stat-content"},Mt={class:"stat-value"},Vt={class:"table-container"},zt={class:"orders-table"},Rt={key:0},Ut={key:1},It=["value"],Ot={class:"customer-info"},Yt={class:"customer-name"},Kt={class:"customer-email"},Pt={class:"badge-count"},Ft=["value","onChange"],Gt={class:"action-buttons"},qt=["onClick"],Lt=["onClick"],jt={key:0,class:"bulk-actions"},Ht={class:"bulk-info"},Zt={class:"bulk-buttons"},Jt={class:"pagination"},Qt=["disabled"],Wt={class:"page-numbers"},Xt=["onClick"],te=["disabled"],ee={class:"modal-content order-detail-modal"},le={class:"modal-header"},se={class:"flex items-center gap-2"},ae={class:"modal-body"},ne={class:"detail-section"},oe={class:"detail-grid"},ie={class:"detail-item"},de={class:"detail-item"},ue={class:"detail-item"},re={class:"detail-item"},ve={class:"detail-section"},pe={class:"detail-grid"},me={class:"detail-item"},ce={class:"detail-item"},ge={class:"detail-section"},be={class:"flex items-center gap-2"},ye={class:"items-table"},ke={class:"detail-section"},_e={class:"detail-grid"},fe={class:"detail-item"},he={class:"detail-item"},Se={class:"detail-item"},xe={class:"detail-item"},Te={class:"modal-footer"},Ce=X({__name:"OrderManagement",setup(we){const S=p([]),z=p([]),B=p(!1),r=p([]),x=p(!1),D=p(!1),n=p(null),o=p({search:"",status:"",paymentStatus:"",dateRange:"",vendorId:"",sortBy:"newest"}),g=p({pending:0,processing:0,shipped:0,delivered:0,totalRevenue:0}),i=p({current:1,total:1,perPage:20});let A=null;const K=tt(()=>{const s=[],e=i.value.current,l=i.value.total,m=2;for(let M=Math.max(1,e-m);M<=Math.min(l,e+m);M++)s.push(M);return s}),f=s=>new Intl.NumberFormat("tr-TR").format(s),P=s=>new Date(s).toLocaleDateString("tr-TR",{day:"2-digit",month:"short",year:"numeric"}),F=s=>new Date(s).toLocaleString("tr-TR",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),G=s=>({pending:"Bekliyor",processing:"Ä°ÅŸleniyor",shipped:"Kargoda",delivered:"Teslim Edildi",cancelled:"Ä°ptal"})[s]||s,R=s=>({paid:"Ã–dendi",pending:"Bekliyor",failed:"BaÅŸarÄ±sÄ±z"})[s]||s,v=async()=>{B.value=!0;try{const{data:s}=await _.get("/api/admin/orders",{params:{page:i.value.current,search:o.value.search,status:o.value.status,payment_status:o.value.paymentStatus,date_range:o.value.dateRange,vendor_id:o.value.vendorId,sort_by:o.value.sortBy}});S.value=s.data,i.value={current:s.current_page,total:s.last_page,perPage:s.per_page},q()}catch(s){console.error("SipariÅŸler yÃ¼klenemedi:",s)}finally{B.value=!1}},q=async()=>{try{const{data:s}=await _.get("/api/admin/orders/stats");g.value=s}catch(s){console.error("Ä°statistikler yÃ¼klenemedi:",s)}},U=async()=>{try{const{data:s}=await _.get("/api/admin/sellers?per_page=1000");z.value=s.data}catch(s){console.error("SatÄ±cÄ±lar yÃ¼klenemedi:",s)}},L=()=>{A&&clearTimeout(A),A=window.setTimeout(()=>{i.value.current=1,v()},500)},j=()=>{x.value?r.value=S.value.map(s=>s.id):r.value=[]},N=s=>{s>=1&&s<=i.value.total&&(i.value.current=s,v())},H=async s=>{try{const{data:e}=await _.get(`/api/admin/orders/${s.id}`);n.value=e,D.value=!0}catch(e){console.error("SipariÅŸ detayÄ± yÃ¼klenemedi:",e)}},$=()=>{D.value=!1,n.value=null},Z=async(s,e)=>{try{await _.put(`/api/admin/orders/${s.id}/status`,{status:e}),await v()}catch(l){console.error("SipariÅŸ durumu gÃ¼ncellenemedi:",l),alert("Bir hata oluÅŸtu")}},E=async s=>{if(confirm(`${r.value.length} sipariÅŸin durumunu deÄŸiÅŸtirmek istediÄŸinizden emin misiniz?`))try{await _.post("/api/admin/orders/bulk-update-status",{order_ids:r.value,status:s}),r.value=[],x.value=!1,await v()}catch(e){console.error("Toplu durum gÃ¼ncelleme baÅŸarÄ±sÄ±z:",e),alert("Bir hata oluÅŸtu")}},J=()=>{console.log("Export selected orders:",r.value)},Q=()=>{console.log("Export all orders to Excel")},I=s=>{console.log("Print invoice for order:",s.id)},W=()=>{v(),U()};return et(()=>{v(),U()}),(s,e)=>(u(),d("div",nt,[t("div",ot,[t("div",it,[t("h1",dt,[b(y,{name:"box",cls:"w-8 h-8 text-blue-600"}),e[14]||(e[14]=T(" SipariÅŸ YÃ¶netimi",-1))]),e[15]||(e[15]=t("p",{class:"subtitle"},"TÃ¼m sipariÅŸleri gÃ¶rÃ¼ntÃ¼leyin ve yÃ¶netin",-1))]),t("div",{class:"header-actions"},[t("button",{onClick:W,class:"btn-refresh"},"ğŸ”„ Yenile"),t("button",{onClick:Q,class:"btn-export"},"ğŸ“Š Excel'e Aktar")])]),t("div",ut,[t("div",rt,[e[16]||(e[16]=t("label",null,"ğŸ” Ara",-1)),c(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>o.value.search=l),type:"text",placeholder:"SipariÅŸ no, mÃ¼ÅŸteri adÄ±, e-posta...",onInput:L},null,544),[[lt,o.value.search]])]),t("div",vt,[e[18]||(e[18]=t("label",null,"ğŸ“Š Durum",-1)),c(t("select",{"onUpdate:modelValue":e[1]||(e[1]=l=>o.value.status=l),onChange:v},[...e[17]||(e[17]=[V('<option value="" data-v-4a35dd0d>TÃ¼mÃ¼</option><option value="pending" data-v-4a35dd0d>Bekliyor</option><option value="processing" data-v-4a35dd0d>Ä°ÅŸleniyor</option><option value="shipped" data-v-4a35dd0d>Kargoda</option><option value="delivered" data-v-4a35dd0d>Teslim Edildi</option><option value="cancelled" data-v-4a35dd0d>Ä°ptal</option>',6)])],544),[[h,o.value.status]])]),t("div",pt,[e[20]||(e[20]=t("label",null,"ğŸ’³ Ã–deme Durumu",-1)),c(t("select",{"onUpdate:modelValue":e[2]||(e[2]=l=>o.value.paymentStatus=l),onChange:v},[...e[19]||(e[19]=[t("option",{value:""},"TÃ¼mÃ¼",-1),t("option",{value:"paid"},"Ã–dendi",-1),t("option",{value:"pending"},"Bekliyor",-1),t("option",{value:"failed"},"BaÅŸarÄ±sÄ±z",-1)])],544),[[h,o.value.paymentStatus]])]),t("div",mt,[e[22]||(e[22]=t("label",null,"ğŸ“… Tarih AralÄ±ÄŸÄ±",-1)),c(t("select",{"onUpdate:modelValue":e[3]||(e[3]=l=>o.value.dateRange=l),onChange:v},[...e[21]||(e[21]=[V('<option value="" data-v-4a35dd0d>TÃ¼m Zamanlar</option><option value="today" data-v-4a35dd0d>BugÃ¼n</option><option value="week" data-v-4a35dd0d>Son 7 GÃ¼n</option><option value="month" data-v-4a35dd0d>Son 30 GÃ¼n</option><option value="year" data-v-4a35dd0d>Bu YÄ±l</option>',5)])],544),[[h,o.value.dateRange]])]),t("div",ct,[e[24]||(e[24]=t("label",null,"ğŸª SatÄ±cÄ±",-1)),c(t("select",{"onUpdate:modelValue":e[4]||(e[4]=l=>o.value.vendorId=l),onChange:v},[e[23]||(e[23]=t("option",{value:""},"TÃ¼m SatÄ±cÄ±lar",-1)),(u(!0),d(C,null,w(z.value,l=>(u(),d("option",{key:l.id,value:l.id},a(l.store_name),9,gt))),128))],544),[[h,o.value.vendorId]])]),t("div",bt,[e[26]||(e[26]=t("label",null,"ğŸ“ˆ SÄ±ralama",-1)),c(t("select",{"onUpdate:modelValue":e[5]||(e[5]=l=>o.value.sortBy=l),onChange:v},[...e[25]||(e[25]=[t("option",{value:"newest"},"En Yeni",-1),t("option",{value:"oldest"},"En Eski",-1),t("option",{value:"amount_high"},"Tutar (YÃ¼ksek)",-1),t("option",{value:"amount_low"},"Tutar (DÃ¼ÅŸÃ¼k)",-1)])],544),[[h,o.value.sortBy]])])]),t("div",yt,[t("div",kt,[e[28]||(e[28]=t("div",{class:"stat-icon"},"â³",-1)),t("div",_t,[t("div",ft,a(g.value.pending),1),e[27]||(e[27]=t("div",{class:"stat-label"},"Bekleyen",-1))])]),t("div",ht,[e[30]||(e[30]=t("div",{class:"stat-icon"},"âš™ï¸",-1)),t("div",St,[t("div",xt,a(g.value.processing),1),e[29]||(e[29]=t("div",{class:"stat-label"},"Ä°ÅŸlenen",-1))])]),t("div",Tt,[e[32]||(e[32]=t("div",{class:"stat-icon"},"ğŸšš",-1)),t("div",Ct,[t("div",wt,a(g.value.shipped),1),e[31]||(e[31]=t("div",{class:"stat-label"},"Kargoda",-1))])]),t("div",Bt,[t("div",Dt,[b(y,{name:"check",cls:"w-6 h-6 text-green-600"})]),t("div",At,[t("div",Nt,a(g.value.delivered),1),e[33]||(e[33]=t("div",{class:"stat-label"},"Teslim Edildi",-1))])]),t("div",$t,[e[35]||(e[35]=t("div",{class:"stat-icon"},"ğŸ’°",-1)),t("div",Et,[t("div",Mt,"â‚º"+a(f(g.value.totalRevenue)),1),e[34]||(e[34]=t("div",{class:"stat-label"},"Toplam Gelir",-1))])])]),t("div",Vt,[t("table",zt,[t("thead",null,[t("tr",null,[t("th",null,[c(t("input",{type:"checkbox","onUpdate:modelValue":e[6]||(e[6]=l=>x.value=l),onChange:j},null,544),[[Y,x.value]])]),e[36]||(e[36]=t("th",null,"SipariÅŸ No",-1)),e[37]||(e[37]=t("th",null,"MÃ¼ÅŸteri",-1)),e[38]||(e[38]=t("th",null,"SatÄ±cÄ±",-1)),e[39]||(e[39]=t("th",null,"ÃœrÃ¼n SayÄ±sÄ±",-1)),e[40]||(e[40]=t("th",null,"Tutar",-1)),e[41]||(e[41]=t("th",null,"Ã–deme",-1)),e[42]||(e[42]=t("th",null,"Durum",-1)),e[43]||(e[43]=t("th",null,"Tarih",-1)),e[44]||(e[44]=t("th",null,"Ä°ÅŸlemler",-1))])]),t("tbody",null,[B.value?(u(),d("tr",Rt,[...e[45]||(e[45]=[t("td",{colspan:"10",class:"loading-cell"},[t("div",{class:"loader"},"â³ YÃ¼kleniyor...")],-1)])])):S.value.length===0?(u(),d("tr",Ut,[...e[46]||(e[46]=[t("td",{colspan:"10",class:"empty-cell"}," ğŸ˜• SipariÅŸ bulunamadÄ± ",-1)])])):(u(!0),d(C,{key:2},w(S.value,l=>(u(),d("tr",{key:l.id,class:k({selected:r.value.includes(l.id)})},[t("td",null,[c(t("input",{type:"checkbox",value:l.id,"onUpdate:modelValue":e[7]||(e[7]=m=>r.value=m)},null,8,It),[[Y,r.value]])]),t("td",null,[t("strong",null,"#"+a(l.id),1)]),t("td",null,[t("div",Ot,[t("div",Yt,a(l.user?.name||"Misafir"),1),t("div",Kt,a(l.user?.email||"N/A"),1)])]),t("td",null,a(l.vendor?.store_name||"N/A"),1),t("td",null,[t("span",Pt,a(l.items_count||0),1)]),t("td",null,[t("strong",null,"â‚º"+a(f(l.total_amount)),1)]),t("td",null,[t("span",{class:k(["payment-badge",`payment-${l.payment_status}`])},a(R(l.payment_status)),3)]),t("td",null,[t("select",{value:l.status,onChange:m=>Z(l,m.target.value),class:k(["status-select",`status-${l.status}`])},[...e[47]||(e[47]=[V('<option value="pending" data-v-4a35dd0d>Bekliyor</option><option value="processing" data-v-4a35dd0d>Ä°ÅŸleniyor</option><option value="shipped" data-v-4a35dd0d>Kargoda</option><option value="delivered" data-v-4a35dd0d>Teslim Edildi</option><option value="cancelled" data-v-4a35dd0d>Ä°ptal</option>',5)])],42,Ft)]),t("td",null,a(P(l.created_at)),1),t("td",null,[t("div",Gt,[t("button",{onClick:m=>H(l),class:"btn-action btn-view",title:"DetaylarÄ± GÃ¶r"}," ğŸ‘ï¸ ",8,qt),t("button",{onClick:m=>I(l),class:"btn-action btn-print",title:"Fatura YazdÄ±r"}," ğŸ–¨ï¸ ",8,Lt)])])],2))),128))])])]),r.value.length>0?(u(),d("div",jt,[t("div",Ht,a(r.value.length)+" sipariÅŸ seÃ§ildi ",1),t("div",Zt,[t("button",{onClick:e[8]||(e[8]=l=>E("processing")),class:"btn-bulk"},"âš™ï¸ Ä°ÅŸle"),t("button",{onClick:e[9]||(e[9]=l=>E("shipped")),class:"btn-bulk"},"ğŸšš Kargola"),t("button",{onClick:e[10]||(e[10]=l=>E("delivered")),class:"btn-bulk"},[b(y,{name:"check",cls:"w-4 h-4 inline mr-1"}),e[48]||(e[48]=T(" Teslim Et",-1))]),t("button",{onClick:J,class:"btn-bulk"},"ğŸ“Š DÄ±ÅŸa Aktar")])])):O("",!0),t("div",Jt,[t("button",{onClick:e[11]||(e[11]=l=>N(i.value.current-1)),disabled:i.value.current===1,class:"btn-page"}," â† Ã–nceki ",8,Qt),t("div",Wt,[(u(!0),d(C,null,w(K.value,l=>(u(),d("button",{key:l,onClick:m=>N(l),class:k(["btn-page",{active:l===i.value.current}])},a(l),11,Xt))),128))]),t("button",{onClick:e[12]||(e[12]=l=>N(i.value.current+1)),disabled:i.value.current===i.value.total,class:"btn-page"}," Sonraki â†’ ",8,te)]),D.value?(u(),d("div",{key:1,class:"modal-overlay",onClick:st($,["self"])},[t("div",ee,[t("div",le,[t("h2",se,[b(y,{name:"box",cls:"w-6 h-6 text-blue-600"}),T(" SipariÅŸ #"+a(n.value?.id),1)]),t("button",{onClick:$,class:"btn-close"},[b(y,{name:"close",cls:"w-5 h-5"})])]),t("div",ae,[t("div",ne,[e[53]||(e[53]=t("h3",null,"ğŸ‘¤ MÃ¼ÅŸteri Bilgileri",-1)),t("div",oe,[t("div",ie,[e[49]||(e[49]=t("label",null,"Ad Soyad",-1)),t("div",null,a(n.value?.user?.name||"Misafir"),1)]),t("div",de,[e[50]||(e[50]=t("label",null,"E-posta",-1)),t("div",null,a(n.value?.user?.email||"N/A"),1)]),t("div",ue,[e[51]||(e[51]=t("label",null,"Telefon",-1)),t("div",null,a(n.value?.shipping_phone||"N/A"),1)]),t("div",re,[e[52]||(e[52]=t("label",null,"Adres",-1)),t("div",null,a(n.value?.shipping_address||"N/A"),1)])])]),t("div",ve,[e[56]||(e[56]=t("h3",null,"ğŸª SatÄ±cÄ± Bilgileri",-1)),t("div",pe,[t("div",me,[e[54]||(e[54]=t("label",null,"MaÄŸaza",-1)),t("div",null,a(n.value?.vendor?.store_name||"N/A"),1)]),t("div",ce,[e[55]||(e[55]=t("label",null,"Telefon",-1)),t("div",null,a(n.value?.vendor?.phone||"N/A"),1)])])]),t("div",ge,[t("h3",be,[b(y,{name:"box",cls:"w-5 h-5 text-blue-600"}),e[57]||(e[57]=T(" SipariÅŸ DetaylarÄ±",-1))]),t("table",ye,[e[59]||(e[59]=t("thead",null,[t("tr",null,[t("th",null,"ÃœrÃ¼n"),t("th",null,"Birim Fiyat"),t("th",null,"Adet"),t("th",null,"Toplam")])],-1)),t("tbody",null,[(u(!0),d(C,null,w(n.value?.items,l=>(u(),d("tr",{key:l.id},[t("td",null,a(l.product?.name||"N/A"),1),t("td",null,"â‚º"+a(f(l.price)),1),t("td",null,a(l.quantity),1),t("td",null,[t("strong",null,"â‚º"+a(f(l.price*l.quantity)),1)])]))),128))]),t("tfoot",null,[t("tr",null,[e[58]||(e[58]=t("td",{colspan:"3"},[t("strong",null,"Toplam")],-1)),t("td",null,[t("strong",null,"â‚º"+a(f(n.value?.total_amount)),1)])])])])]),t("div",ke,[e[64]||(e[64]=t("h3",null,"ğŸ“Š SipariÅŸ Durumu",-1)),t("div",_e,[t("div",fe,[e[60]||(e[60]=t("label",null,"Durum",-1)),t("div",null,[t("span",{class:k(["status-badge",`status-${n.value?.status}`])},a(G(n.value?.status)),3)])]),t("div",he,[e[61]||(e[61]=t("label",null,"Ã–deme Durumu",-1)),t("div",null,[t("span",{class:k(["payment-badge",`payment-${n.value?.payment_status}`])},a(R(n.value?.payment_status)),3)])]),t("div",Se,[e[62]||(e[62]=t("label",null,"Kargo Takip No",-1)),t("div",null,a(n.value?.tracking_number||"HenÃ¼z atanmadÄ±"),1)]),t("div",xe,[e[63]||(e[63]=t("label",null,"SipariÅŸ Tarihi",-1)),t("div",null,a(F(n.value?.created_at)),1)])])])]),t("div",Te,[t("button",{onClick:$,class:"btn-secondary"},"Kapat"),t("button",{onClick:e[13]||(e[13]=l=>I(n.value)),class:"btn-primary"},"ğŸ–¨ï¸ Fatura YazdÄ±r")])])])):O("",!0)]))}}),Ae=at(Ce,[["__scopeId","data-v-4a35dd0d"]]);export{Ae as default};
