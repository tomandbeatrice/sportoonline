const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/echo-CHAsjWUn.js","assets/_commonjsHelpers-DsqdWQfm.js"])))=>i.map(i=>d[i]);
import{C as w,D as Q,B as W,L as X,a as N,b as V,P as ee,c as te,p as H,d as L,e as T,i as ae,f as se,A as ne}from"./chart-DUPVkyAx.js";import{d as x,al as I,am as S,an as re,r as D,o as q,a as G,R as oe,ao as M,ap as K,S as ie,c as B,e as m,f as p,l as E,i as A,z as j,g as c,n as z,h as b,t as $,T as le,w as de,q as ue,F as ce,k as pe,M as me,ak as ge,A as fe,_ as ye,aq as he}from"./index-BGyiXXhD.js";const U={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},ve={ariaLabel:{type:String},ariaDescribedby:{type:String}},be={type:{type:String,required:!0},destroyDelay:{type:Number,default:0},...U,...ve},ke=re[0]==="2"?(e,a)=>Object.assign(e,{attrs:a}):(e,a)=>Object.assign(e,a);function k(e){return K(e)?M(e):e}function xe(e){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e;return K(a)?new Proxy(e,{}):e}function we(e,a){const i=e.options;i&&a&&Object.assign(i,a)}function Y(e,a){e.labels=a}function Z(e,a,i){const u=[];e.datasets=a.map(d=>{const r=e.datasets.find(s=>s[i]===d[i]);return!r||!d.data||u.includes(r)?{...d}:(u.push(r),Object.assign(r,d),r)})}function Ce(e,a){const i={labels:[],datasets:[]};return Y(i,e.labels),Z(i,e.datasets,a),i}const _e=x({props:be,setup(e,a){let{expose:i,slots:u}=a;const d=D(null),r=I(null);i({chart:r});const s=()=>{if(!d.value)return;const{type:o,data:t,options:g,plugins:y,datasetIdKey:O}=e,C=Ce(t,O),h=xe(C,t);r.value=new w(d.value,{type:o,data:h,options:{...g},plugins:y})},n=()=>{const o=M(r.value);o&&(e.destroyDelay>0?setTimeout(()=>{o.destroy(),r.value=null},e.destroyDelay):(o.destroy(),r.value=null))},l=o=>{o.update(e.updateMode)};return q(s),G(n),oe([()=>e.options,()=>e.data],(o,t)=>{let[g,y]=o,[O,C]=t;const h=M(r.value);if(!h)return;let _=!1;if(g){const v=k(g),R=k(O);v&&v!==R&&(we(h,v),_=!0)}if(y){const v=k(y.labels),R=k(C.labels),P=k(y.datasets),J=k(C.datasets);v!==R&&(Y(h.config.data,v),_=!0),P&&P!==J&&(Z(h.config.data,P,e.datasetIdKey),_=!0)}_&&ie(()=>{l(h)})},{deep:!0}),()=>S("canvas",{role:"img","aria-label":e.ariaLabel,"aria-describedby":e.ariaDescribedby,ref:d},[S("p",{},[u.default?u.default():""])])}});function F(e,a){return w.register(a),x({props:U,setup(i,u){let{expose:d}=u;const r=I(null),s=n=>{r.value=n?.chart};return d({chart:r}),()=>S(_e,ke({ref:s},{type:e,...i}))}})}const $e=F("bar",W),De=F("doughnut",Q),Ae=F("line",X),qe=x({__name:"LineChart",props:{data:{type:Object,required:!0},height:{type:Number,default:300}},setup(e){w.register(N,V,ee,te,H,L,T,ae);const a=B(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"top",labels:{usePointStyle:!0,padding:15,font:{size:12,family:"'Inter', sans-serif"}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",padding:12,titleFont:{size:14,weight:"bold"},bodyFont:{size:13},cornerRadius:8}},scales:{x:{grid:{display:!1},ticks:{font:{size:11}}},y:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.05)"},ticks:{font:{size:11}}}},interaction:{intersect:!1,mode:"index"}}));return(i,u)=>(p(),m("div",{style:E({height:`${e.height}px`})},[A(j(Ae),{data:e.data,options:a.value},null,8,["data","options"])],4))}}),Ge=x({__name:"BarChart",props:{data:{type:Object,required:!0},height:{type:Number,default:300}},setup(e){w.register(N,V,se,H,L,T);const a=B(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"top",labels:{usePointStyle:!0,padding:15,font:{size:12,family:"'Inter', sans-serif"}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",padding:12,titleFont:{size:14,weight:"bold"},bodyFont:{size:13},cornerRadius:8}},scales:{x:{grid:{display:!1},ticks:{font:{size:11}}},y:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.05)"},ticks:{font:{size:11}}}}}));return(i,u)=>(p(),m("div",{style:E({height:`${e.height}px`})},[A(j($e),{data:e.data,options:a.value},null,8,["data","options"])],4))}}),Ke=x({__name:"DoughnutChart",props:{data:{type:Object,required:!0},height:{type:Number,default:250}},setup(e){w.register(ne,L,T);const a=B(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"right",labels:{usePointStyle:!0,padding:15,font:{size:12,family:"'Inter', sans-serif"}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",padding:12,titleFont:{size:14,weight:"bold"},bodyFont:{size:13},cornerRadius:8,callbacks:{label:function(i){const u=i.label||"",d=i.parsed||0,r=i.dataset.data.reduce((n,l)=>n+l,0),s=(d/r*100).toFixed(1);return`${u}: ${d} (${s}%)`}}}}}));return(i,u)=>(p(),m("div",{style:E({height:`${e.height}px`})},[A(j(De),{data:e.data,options:a.value},null,8,["data","options"])],4))}}),Oe={class:"relative"},Re={key:0,class:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center rounded-full bg-red-500 text-white text-xs font-bold"},Pe={key:0,class:"absolute right-0 mt-2 w-96 bg-white rounded-lg shadow-xl border border-gray-200 z-50"},ze={class:"flex items-center justify-between p-4 border-b"},Se={class:"max-h-96 overflow-y-auto"},Me={key:0,class:"p-8 text-center text-gray-500"},Le=["onClick"],Te={class:"flex items-start gap-3"},Be={class:"flex-1 min-w-0"},Ee={class:"text-sm font-medium text-gray-900"},je={class:"text-sm text-gray-600 mt-1"},Fe={class:"text-xs text-gray-400 mt-1"},Ne={key:0,class:"flex-shrink-0"},Ve={key:0,class:"p-3 border-t bg-gray-50"},Ue=x({__name:"NotificationDropdown",props:{notifications:{},unreadCount:{},markAsRead:{type:Function},markAllAsRead:{type:Function},clearAll:{type:Function}},setup(e){const a=D(!1),i=s=>{const n={order:"bg-green-100 text-green-600",payment:"bg-blue-100 text-blue-600",status:"bg-yellow-100 text-yellow-600",system:"bg-gray-100 text-gray-600"};return n[s]||n.system},u=s=>{const n={order:'<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" /></svg>',payment:'<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>',status:'<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>',system:'<svg fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" /></svg>'};return n[s]||n.system},d=s=>{const n=new Date(s),o=new Date().getTime()-n.getTime(),t=Math.floor(o/6e4);if(t<1)return"Åžimdi";if(t<60)return`${t} dk Ã¶nce`;const g=Math.floor(t/60);if(g<24)return`${g} sa Ã¶nce`;const y=Math.floor(g/24);return y<7?`${y} gÃ¼n Ã¶nce`:n.toLocaleDateString("tr-TR")},r={mounted(s,n){s.clickOutsideEvent=l=>{s===l.target||s.contains(l.target)||n.value()},document.addEventListener("click",s.clickOutsideEvent)},unmounted(s){document.removeEventListener("click",s.clickOutsideEvent)}};return(s,n)=>(p(),m("div",Oe,[c("button",{onClick:n[0]||(n[0]=l=>a.value=!a.value),class:z(["relative p-2 rounded-full hover:bg-gray-100 transition-colors",{"bg-gray-100":a.value}])},[n[3]||(n[3]=c("svg",{class:"w-6 h-6 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1)),s.unreadCount>0?(p(),m("span",Re,$(s.unreadCount>9?"9+":s.unreadCount),1)):b("",!0)],2),A(le,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:de(()=>[a.value?ue((p(),m("div",Pe,[c("div",ze,[n[4]||(n[4]=c("h3",{class:"text-lg font-semibold text-gray-900"},"Bildirimler",-1)),s.unreadCount>0?(p(),m("button",{key:0,onClick:n[1]||(n[1]=(...l)=>s.markAllAsRead&&s.markAllAsRead(...l)),class:"text-sm text-blue-600 hover:text-blue-800"}," TÃ¼mÃ¼nÃ¼ Okundu Ä°ÅŸaretle ")):b("",!0)]),c("div",Se,[s.notifications.length===0?(p(),m("div",Me,[...n[5]||(n[5]=[c("svg",{class:"mx-auto h-12 w-12 text-gray-400 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})],-1),c("p",null,"HenÃ¼z bildiriminiz yok",-1)])])):b("",!0),(p(!0),m(ce,null,pe(s.notifications,l=>(p(),m("div",{key:l.id,onClick:o=>s.markAsRead(l.id),class:z(["p-4 border-b hover:bg-gray-50 cursor-pointer transition-colors",{"bg-blue-50":!l.read}])},[c("div",Te,[c("div",{class:z(["flex-shrink-0 h-10 w-10 rounded-full flex items-center justify-center",i(l.type)])},[(p(),me(ge(u(l.type)),{class:"h-5 w-5"}))],2),c("div",Be,[c("p",Ee,$(l.title),1),c("p",je,$(l.message),1),c("p",Fe,$(d(l.timestamp)),1)]),l.read?b("",!0):(p(),m("div",Ne,[...n[6]||(n[6]=[c("span",{class:"h-2 w-2 rounded-full bg-blue-600"},null,-1)])]))])],10,Le))),128))]),s.notifications.length>0?(p(),m("div",Ve,[c("button",{onClick:n[2]||(n[2]=(...l)=>s.clearAll&&s.clearAll(...l)),class:"w-full text-center text-sm text-red-600 hover:text-red-800"}," TÃ¼mÃ¼nÃ¼ Temizle ")])):b("",!0)])),[[r,()=>a.value=!1]]):b("",!0)]),_:1})]))}});let f=null;function Ye(e,a){const i=fe(),u=D([]),d=D(0),r=o=>{u.value.unshift(o),d.value++;const t=o.type==="order"?"success":o.type==="payment"?"info":o.type==="status"?"warning":"info";i[t](o.message,{timeout:5e3,position:he.TOP_RIGHT})},s=o=>{const t=u.value.find(g=>g.id===o);t&&!t.read&&(t.read=!0,d.value=Math.max(0,d.value-1))},n=()=>{u.value.forEach(o=>o.read=!0),d.value=0},l=()=>{u.value=[],d.value=0};return q(async()=>{if(!e||!a){console.warn("âš ï¸ Notifications: userId or role not provided");return}try{f=(await ye(()=>import("./echo-CHAsjWUn.js"),__vite__mapDeps([0,1]))).default,console.log(`ðŸ”” Setting up notifications for ${a} #${e}`),a==="admin"&&f.private("admin").listen("OrderCreated",t=>{r({id:`order-${t.id}-${Date.now()}`,type:"order",title:"Yeni SipariÅŸ",message:t.message,data:t,read:!1,timestamp:t.created_at})}).listen("PaymentReceived",t=>{r({id:`payment-${t.order_id}-${Date.now()}`,type:"payment",title:"Ã–deme AlÄ±ndÄ±",message:t.message,data:t,read:!1,timestamp:t.timestamp})}).listen("OrderStatusChanged",t=>{r({id:`status-${t.id}-${Date.now()}`,type:"status",title:"SipariÅŸ Durumu",message:t.message,data:t,read:!1,timestamp:t.updated_at})}),a==="seller"&&f.private(`seller.${e}`).listen("OrderCreated",t=>{r({id:`order-${t.id}-${Date.now()}`,type:"order",title:"Yeni SipariÅŸ",message:t.message,data:t,read:!1,timestamp:t.created_at})}).listen("PaymentReceived",t=>{r({id:`payment-${t.order_id}-${Date.now()}`,type:"payment",title:"Ã–deme AlÄ±ndÄ±",message:t.message,data:t,read:!1,timestamp:t.timestamp})}),a==="buyer"&&f.private(`user.${e}`).listen("OrderStatusChanged",t=>{r({id:`status-${t.id}-${Date.now()}`,type:"status",title:"SipariÅŸ Durumu GÃ¼ncellendi",message:t.message,data:t,read:!1,timestamp:t.updated_at})}),f.channel("orders").listen("OrderCreated",t=>{console.log("ðŸ“¦ Public order created:",t)})}catch(o){console.warn("âš ï¸ Echo not loaded yet (install in progress)",o)}}),G(()=>{f&&(f.leaveChannel("admin"),f.leaveChannel(`seller.${e}`),f.leaveChannel(`user.${e}`),f.leaveChannel("orders"))}),{notifications:u,unreadCount:d,addNotification:r,markAsRead:s,markAllAsRead:n,clearAll:l}}export{Ue as _,qe as a,Ge as b,Ke as c,Ye as u};
