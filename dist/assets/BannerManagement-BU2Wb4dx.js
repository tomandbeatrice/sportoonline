import{d as X,r as p,B as O,o as tt,D as y,e as i,f as d,g as t,h as u,j as P,t as o,i as et,O as at,q as v,v as g,P as V,m as z,F as st,k as lt,n as M,p as $,G as Y}from"./index-BGyiXXhD.js";import{_ as ot}from"./_plugin-vue_export-helper-DlAUqK2U.js";const nt={class:"banner-management"},it={class:"stats-grid"},dt={class:"stat-card"},rt={class:"stat-content"},ut={class:"stat-value"},vt={class:"stat-card"},pt={class:"stat-icon"},ct={class:"stat-content"},mt={class:"stat-value"},_t={class:"stat-card"},gt={class:"stat-content"},ft={class:"stat-value"},yt={class:"stat-card"},kt={class:"stat-content"},bt={class:"stat-value"},ht={class:"filters"},wt={class:"filter-group"},Bt={class:"filter-group"},St={class:"filter-group"},Ct={class:"filter-group"},At={class:"table-container"},Tt={key:0},Dt=["src","alt"],xt={class:"banner-info"},Vt={class:"banner-meta"},zt={key:0,class:"link"},Ut={class:"order"},Pt={class:"schedule"},Mt={key:0},$t={key:1},Lt={key:2,class:"no-schedule"},Rt={class:"actions"},Gt=["onClick","title"],Ft=["onClick"],Ot=["onClick"],Yt=["onClick"],Kt={key:1,class:"loading"},It={key:2,class:"empty-state"},qt={key:0,class:"pagination"},Et=["disabled"],Nt={class:"page-info"},Zt=["disabled"],jt={class:"modal"},Jt={class:"modal-header"},Wt={class:"modal-body"},Ht={class:"form-row"},Qt={class:"form-group full"},Xt={class:"form-row"},te={class:"form-group"},ee={class:"form-group"},ae={class:"form-row"},se={class:"form-group full"},le={class:"image-upload"},oe=["required"],ne={key:0,class:"image-preview"},ie=["src"],de={key:1,class:"upload-placeholder"},re={class:"form-row"},ue={class:"form-group full"},ve={class:"form-row"},pe={class:"form-group"},ce={class:"form-row"},me={class:"form-group"},_e={class:"form-group"},ge={class:"form-row"},fe={class:"form-group full"},ye={class:"form-row"},ke={class:"form-group"},be={class:"modal-footer"},he=["disabled"],we={class:"modal"},Be={class:"modal-header"},Se={key:0,class:"modal-body"},Ce={class:"stats-detail"},Ae={class:"stats-grid"},Te={class:"stat-box"},De={class:"stat-value"},xe={class:"stat-box"},Ve={class:"stat-value"},ze={class:"stat-box"},Ue={class:"stat-value"},Pe={class:"stat-box"},Me={class:"stat-value"},$e={class:"stat-row"},Le={key:0,class:"stat-row"},Re={key:1,class:"stat-row"},Ge=X({__name:"BannerManagement",setup(Fe){const k=p(!1),S=p(!1),C=p(!1),A=p(!1),f=p(!1),r=p(null),U=p(),b=p(""),h=p(null),T=p([]),w=p({total:0,active:0,scheduled:0,totalViews:0}),n=O({search:"",position:"",status:"",sort_by:"order_asc",page:1}),c=p({current_page:1,last_page:1,per_page:20,total:0}),l=O({title:"",position:"",order:0,image_url:"",link_url:"",open_new_tab:!0,start_date:"",end_date:"",description:"",is_active:!0});tt(()=>{_(),D()});const _=async()=>{k.value=!0;try{const s=new URLSearchParams;n.search&&s.append("search",n.search),n.position&&s.append("position",n.position),n.status&&s.append("status",n.status),n.sort_by&&s.append("sort_by",n.sort_by),s.append("page",n.page.toString());const e=await y.get(`/api/admin/banners?${s}`);T.value=e.data.data,c.value={current_page:e.data.current_page,last_page:e.data.last_page,per_page:e.data.per_page,total:e.data.total}}catch(s){console.error("Banner yÃ¼kleme hatasÄ±:",s),alert("Banner'lar yÃ¼klenirken bir hata oluÅŸtu")}finally{k.value=!1}},D=async()=>{try{const s=await y.get("/api/admin/banners/stats");w.value=s.data}catch(s){console.error("Ä°statistik yÃ¼kleme hatasÄ±:",s)}},K=()=>{L(),f.value=!1,C.value=!0},I=s=>{Object.assign(l,{title:s.title,position:s.position,order:s.order,image_url:s.image_url,link_url:s.link_url||"",open_new_tab:s.open_new_tab,start_date:s.start_date?s.start_date.slice(0,16):"",end_date:s.end_date?s.end_date.slice(0,16):"",description:s.description||"",is_active:s.is_active}),r.value=s,f.value=!0,C.value=!0},q=s=>{const a=s.target.files?.[0];if(a){if(a.size>2*1024*1024){alert("Dosya boyutu en fazla 2MB olmalÄ±dÄ±r");return}if(!a.type.startsWith("image/")){alert("Sadece resim dosyalarÄ± yÃ¼klenebilir");return}h.value=a;const m=new FileReader;m.onload=Q=>{b.value=Q.target?.result},m.readAsDataURL(a)}},E=()=>{b.value="",h.value=null,l.image_url="",U.value&&(U.value.value="")},N=async()=>{S.value=!0;try{const s=new FormData;Object.entries(l).forEach(([e,a])=>{a!==null&&a!==""&&s.append(e,a.toString())}),h.value&&s.append("image",h.value),f.value&&r.value?(s.append("_method","PUT"),await y.post(`/api/admin/banners/${r.value.id}`,s,{headers:{"Content-Type":"multipart/form-data"}}),alert("Banner gÃ¼ncellendi")):(await y.post("/api/admin/banners",s,{headers:{"Content-Type":"multipart/form-data"}}),alert("Banner oluÅŸturuldu")),x(),_(),D()}catch(s){console.error("Banner kaydetme hatasÄ±:",s),alert(s.response?.data?.message||"Bir hata oluÅŸtu")}finally{S.value=!1}},Z=async s=>{try{await y.put(`/api/admin/banners/${s.id}`,{is_active:!s.is_active}),s.is_active=!s.is_active,D()}catch(e){console.error("Durum gÃ¼ncelleme hatasÄ±:",e),alert("Durum gÃ¼ncellenirken bir hata oluÅŸtu")}},j=async s=>{if(confirm(`"${s.title}" banner'Ä±nÄ± silmek istediÄŸinize emin misiniz?`))try{await y.delete(`/api/admin/banners/${s.id}`),alert("Banner silindi"),_(),D()}catch(e){console.error("Banner silme hatasÄ±:",e),alert("Banner silinirken bir hata oluÅŸtu")}},J=s=>{r.value=s,A.value=!0},x=()=>{C.value=!1,L()},L=()=>{l.title="",l.position="",l.order=0,l.image_url="",l.link_url="",l.open_new_tab=!0,l.start_date="",l.end_date="",l.description="",l.is_active=!0,b.value="",h.value=null,r.value=null},R=s=>{n.page=s,_()},G=s=>({home_top:"Ana Sayfa Ãœst",home_middle:"Ana Sayfa Orta",home_bottom:"Ana Sayfa Alt",sidebar:"Kenar Ã‡ubuÄŸu",category:"Kategori SayfasÄ±",product:"ÃœrÃ¼n Detay"})[s]||s,F=s=>{const e=new Date,a=s.start_date?new Date(s.start_date):null,m=s.end_date?new Date(s.end_date):null;return s.is_active?m&&m<e?"SÃ¼resi DolmuÅŸ":a&&a>e?"ZamanlanmÄ±ÅŸ":"Aktif":"Pasif"},W=s=>{const e=F(s);return{Aktif:"active",ZamanlanmÄ±ÅŸ:"scheduled","SÃ¼resi DolmuÅŸ":"expired",Pasif:"inactive"}[e]||""},H=s=>s>=5?"excellent":s>=2?"good":s>=1?"average":"low",B=s=>new Date(s).toLocaleString("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});return(s,e)=>(d(),i("div",nt,[t("div",{class:"header"},[e[18]||(e[18]=t("div",null,[t("h1",null,"ðŸŽ¨ Banner YÃ¶netimi"),t("p",{class:"subtitle"},"Site iÃ§i banner'larÄ± yÃ¶netin")],-1)),t("button",{onClick:K,class:"btn btn-primary"},[...e[17]||(e[17]=[t("span",null,"âž•",-1),P(" Yeni Banner ",-1)])])]),t("div",it,[t("div",dt,[e[20]||(e[20]=t("div",{class:"stat-icon"},"ðŸ“Š",-1)),t("div",rt,[e[19]||(e[19]=t("div",{class:"stat-label"},"Toplam Banner",-1)),t("div",ut,o(w.value.total),1)])]),t("div",vt,[t("div",pt,[et(at,{name:"check",cls:"w-6 h-6 text-green-600"})]),t("div",ct,[e[21]||(e[21]=t("div",{class:"stat-label"},"Aktif",-1)),t("div",mt,o(w.value.active),1)])]),t("div",_t,[e[23]||(e[23]=t("div",{class:"stat-icon"},"â°",-1)),t("div",gt,[e[22]||(e[22]=t("div",{class:"stat-label"},"ZamanlanmÄ±ÅŸ",-1)),t("div",ft,o(w.value.scheduled),1)])]),t("div",yt,[e[25]||(e[25]=t("div",{class:"stat-icon"},"ðŸ‘ï¸",-1)),t("div",kt,[e[24]||(e[24]=t("div",{class:"stat-label"},"Toplam GÃ¶rÃ¼ntÃ¼leme",-1)),t("div",bt,o(w.value.totalViews.toLocaleString("tr-TR")),1)])])]),t("div",ht,[t("div",wt,[e[26]||(e[26]=t("label",null,"ðŸ” Ara",-1)),v(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>n.search=a),type:"text",placeholder:"Banner adÄ±...",onInput:_},null,544),[[g,n.search]])]),t("div",Bt,[e[28]||(e[28]=t("label",null,"ðŸ“ Pozisyon",-1)),v(t("select",{"onUpdate:modelValue":e[1]||(e[1]=a=>n.position=a),onChange:_},[...e[27]||(e[27]=[z('<option value="" data-v-ce134235>TÃ¼mÃ¼</option><option value="home_top" data-v-ce134235>Ana Sayfa Ãœst</option><option value="home_middle" data-v-ce134235>Ana Sayfa Orta</option><option value="home_bottom" data-v-ce134235>Ana Sayfa Alt</option><option value="sidebar" data-v-ce134235>Kenar Ã‡ubuÄŸu</option><option value="category" data-v-ce134235>Kategori SayfasÄ±</option><option value="product" data-v-ce134235>ÃœrÃ¼n Detay</option>',7)])],544),[[V,n.position]])]),t("div",St,[e[30]||(e[30]=t("label",null,"ðŸ“Š Durum",-1)),v(t("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>n.status=a),onChange:_},[...e[29]||(e[29]=[z('<option value="" data-v-ce134235>TÃ¼mÃ¼</option><option value="active" data-v-ce134235>Aktif</option><option value="scheduled" data-v-ce134235>ZamanlanmÄ±ÅŸ</option><option value="expired" data-v-ce134235>SÃ¼resi DolmuÅŸ</option><option value="inactive" data-v-ce134235>Pasif</option>',5)])],544),[[V,n.status]])]),t("div",Ct,[e[32]||(e[32]=t("label",null,"ðŸ“… SÄ±ralama",-1)),v(t("select",{"onUpdate:modelValue":e[3]||(e[3]=a=>n.sort_by=a),onChange:_},[...e[31]||(e[31]=[z('<option value="order_asc" data-v-ce134235>SÄ±ra (Artan)</option><option value="order_desc" data-v-ce134235>SÄ±ra (Azalan)</option><option value="views_desc" data-v-ce134235>GÃ¶rÃ¼ntÃ¼leme (Ã‡ok â†’ Az)</option><option value="views_asc" data-v-ce134235>GÃ¶rÃ¼ntÃ¼leme (Az â†’ Ã‡ok)</option><option value="created_desc" data-v-ce134235>Yeni â†’ Eski</option><option value="created_asc" data-v-ce134235>Eski â†’ Yeni</option>',6)])],544),[[V,n.sort_by]])])]),t("div",At,[!k.value&&T.value.length>0?(d(),i("table",Tt,[e[35]||(e[35]=t("thead",null,[t("tr",null,[t("th",null,"Ã–nizleme"),t("th",null,"Banner Bilgileri"),t("th",null,"Pozisyon"),t("th",null,"Zamanlama"),t("th",null,"GÃ¶rÃ¼ntÃ¼leme"),t("th",null,"TÄ±klama"),t("th",null,"CTR"),t("th",null,"Durum"),t("th",null,"Ä°ÅŸlemler")])],-1)),t("tbody",null,[(d(!0),i(st,null,lt(T.value,a=>(d(),i("tr",{key:a.id},[t("td",null,[t("img",{src:a.image_url,alt:a.title,class:"banner-preview"},null,8,Dt)]),t("td",null,[t("div",xt,[t("strong",null,o(a.title),1),t("div",Vt,[a.link_url?(d(),i("span",zt,"ðŸ”— "+o(a.link_url),1)):u("",!0),t("span",Ut,"ðŸ“Š SÄ±ra: "+o(a.order),1)])])]),t("td",null,[t("span",{class:M(["position-badge",a.position])},o(G(a.position)),3)]),t("td",null,[t("div",Pt,[a.start_date?(d(),i("div",Mt,[e[33]||(e[33]=t("small",null,"BaÅŸlangÄ±Ã§",-1)),t("div",null,o(B(a.start_date)),1)])):u("",!0),a.end_date?(d(),i("div",$t,[e[34]||(e[34]=t("small",null,"BitiÅŸ",-1)),t("div",null,o(B(a.end_date)),1)])):u("",!0),!a.start_date&&!a.end_date?(d(),i("div",Lt," âˆž SÃ¼resiz ")):u("",!0)])]),t("td",null,[t("strong",null,o(a.views.toLocaleString("tr-TR")),1)]),t("td",null,[t("strong",null,o(a.clicks.toLocaleString("tr-TR")),1)]),t("td",null,[t("span",{class:M(["ctr",H(a.ctr)])},o(a.ctr.toFixed(2))+"% ",3)]),t("td",null,[t("span",{class:M(["status-badge",W(a)])},o(F(a)),3)]),t("td",null,[t("div",Rt,[t("button",{onClick:m=>Z(a),class:"btn-icon",title:a.is_active?"Pasife Al":"Aktif Et"},o(a.is_active?"â¸ï¸":"â–¶ï¸"),9,Gt),t("button",{onClick:m=>I(a),class:"btn-icon",title:"DÃ¼zenle"}," âœï¸ ",8,Ft),t("button",{onClick:m=>J(a),class:"btn-icon",title:"Ä°statistikler"}," ðŸ“Š ",8,Ot),t("button",{onClick:m=>j(a),class:"btn-icon danger",title:"Sil"}," ðŸ—‘ï¸ ",8,Yt)])])]))),128))])])):u("",!0),k.value?(d(),i("div",Kt,[...e[36]||(e[36]=[t("div",{class:"spinner"},null,-1),t("p",null,"YÃ¼kleniyor...",-1)])])):u("",!0),!k.value&&T.value.length===0?(d(),i("div",It,[...e[37]||(e[37]=[t("div",{class:"empty-icon"},"ðŸŽ¨",-1),t("h3",null,"Banner BulunamadÄ±",-1),t("p",null,"Yeni bir banner oluÅŸturun",-1)])])):u("",!0)]),c.value.total>c.value.per_page?(d(),i("div",qt,[t("button",{onClick:e[4]||(e[4]=a=>R(c.value.current_page-1)),disabled:c.value.current_page===1,class:"btn-page"}," â† Ã–nceki ",8,Et),t("span",Nt," Sayfa "+o(c.value.current_page)+" / "+o(c.value.last_page)+" ("+o(c.value.total)+" banner) ",1),t("button",{onClick:e[5]||(e[5]=a=>R(c.value.current_page+1)),disabled:c.value.current_page===c.value.last_page,class:"btn-page"}," Sonraki â†’ ",8,Zt)])):u("",!0),C.value?(d(),i("div",{key:1,class:"modal-overlay",onClick:$(x,["self"])},[t("div",jt,[t("div",Jt,[t("h2",null,o(f.value?"âœï¸ Banner DÃ¼zenle":"âž• Yeni Banner"),1),t("button",{onClick:x,class:"btn-close"},"âœ•")]),t("div",Wt,[t("form",{onSubmit:$(N,["prevent"])},[t("div",Ht,[t("div",Qt,[e[38]||(e[38]=t("label",null,"Banner BaÅŸlÄ±ÄŸÄ± *",-1)),v(t("input",{"onUpdate:modelValue":e[6]||(e[6]=a=>l.title=a),type:"text",placeholder:"Ã–rn: Yaz Ä°ndirimleri 2025",required:""},null,512),[[g,l.title]])])]),t("div",Xt,[t("div",te,[e[40]||(e[40]=t("label",null,"Pozisyon *",-1)),v(t("select",{"onUpdate:modelValue":e[7]||(e[7]=a=>l.position=a),required:""},[...e[39]||(e[39]=[z('<option value="" data-v-ce134235>SeÃ§iniz</option><option value="home_top" data-v-ce134235>Ana Sayfa Ãœst</option><option value="home_middle" data-v-ce134235>Ana Sayfa Orta</option><option value="home_bottom" data-v-ce134235>Ana Sayfa Alt</option><option value="sidebar" data-v-ce134235>Kenar Ã‡ubuÄŸu</option><option value="category" data-v-ce134235>Kategori SayfasÄ±</option><option value="product" data-v-ce134235>ÃœrÃ¼n Detay</option>',7)])],512),[[V,l.position]])]),t("div",ee,[e[41]||(e[41]=t("label",null,"SÄ±ra *",-1)),v(t("input",{"onUpdate:modelValue":e[8]||(e[8]=a=>l.order=a),type:"number",min:"0",placeholder:"0",required:""},null,512),[[g,l.order,void 0,{number:!0}]]),e[42]||(e[42]=t("small",null,"KÃ¼Ã§Ã¼k deÄŸerler Ã¶nce gÃ¶sterilir",-1))])]),t("div",ae,[t("div",se,[e[44]||(e[44]=t("label",null,"Banner GÃ¶rseli *",-1)),t("div",le,[t("input",{type:"file",ref_key:"imageInput",ref:U,accept:"image/*",onChange:q,required:!f.value&&!l.image_url},null,40,oe),b.value||l.image_url?(d(),i("div",ne,[t("img",{src:b.value||l.image_url,alt:"Preview"},null,8,ie),t("button",{type:"button",onClick:E,class:"btn-remove-image"}," âœ• ")])):(d(),i("div",de,[...e[43]||(e[43]=[t("span",{class:"upload-icon"},"ðŸ“¤",-1),t("p",null,"GÃ¶rsel yÃ¼klemek iÃ§in tÄ±klayÄ±n",-1),t("small",null,"PNG, JPG, GIF - Max 2MB",-1)])]))])])]),t("div",re,[t("div",ue,[e[45]||(e[45]=t("label",null,"Link URL",-1)),v(t("input",{"onUpdate:modelValue":e[9]||(e[9]=a=>l.link_url=a),type:"url",placeholder:"https://..."},null,512),[[g,l.link_url]]),e[46]||(e[46]=t("small",null,"Banner'a tÄ±klandÄ±ÄŸÄ±nda yÃ¶nlendirilecek adres",-1))])]),t("div",ve,[t("div",pe,[t("label",null,[v(t("input",{"onUpdate:modelValue":e[10]||(e[10]=a=>l.open_new_tab=a),type:"checkbox"},null,512),[[Y,l.open_new_tab]]),e[47]||(e[47]=P(" Yeni sekmede aÃ§ ",-1))])])]),t("div",ce,[t("div",me,[e[48]||(e[48]=t("label",null,"BaÅŸlangÄ±Ã§ Tarihi",-1)),v(t("input",{"onUpdate:modelValue":e[11]||(e[11]=a=>l.start_date=a),type:"datetime-local"},null,512),[[g,l.start_date]]),e[49]||(e[49]=t("small",null,"BoÅŸ bÄ±rakÄ±lÄ±rsa hemen yayÄ±nlanÄ±r",-1))]),t("div",_e,[e[50]||(e[50]=t("label",null,"BitiÅŸ Tarihi",-1)),v(t("input",{"onUpdate:modelValue":e[12]||(e[12]=a=>l.end_date=a),type:"datetime-local"},null,512),[[g,l.end_date]]),e[51]||(e[51]=t("small",null,"BoÅŸ bÄ±rakÄ±lÄ±rsa sÃ¼resiz yayÄ±nlanÄ±r",-1))])]),t("div",ge,[t("div",fe,[e[52]||(e[52]=t("label",null,"AÃ§Ä±klama",-1)),v(t("textarea",{"onUpdate:modelValue":e[13]||(e[13]=a=>l.description=a),rows:"3",placeholder:"Banner hakkÄ±nda notlar (isteÄŸe baÄŸlÄ±)"},null,512),[[g,l.description]])])]),t("div",ye,[t("div",ke,[t("label",null,[v(t("input",{"onUpdate:modelValue":e[14]||(e[14]=a=>l.is_active=a),type:"checkbox"},null,512),[[Y,l.is_active]]),e[53]||(e[53]=P(" Aktif ",-1))])])]),t("div",be,[t("button",{type:"button",onClick:x,class:"btn btn-secondary"}," Ä°ptal "),t("button",{type:"submit",class:"btn btn-primary",disabled:S.value},o(S.value?"Kaydediliyor...":f.value?"GÃ¼ncelle":"OluÅŸtur"),9,he)])],32)])])])):u("",!0),A.value?(d(),i("div",{key:2,class:"modal-overlay",onClick:e[16]||(e[16]=$(a=>A.value=!1,["self"]))},[t("div",we,[t("div",Be,[e[54]||(e[54]=t("h2",null,"ðŸ“Š Banner Ä°statistikleri",-1)),t("button",{onClick:e[15]||(e[15]=a=>A.value=!1),class:"btn-close"},"âœ•")]),r.value?(d(),i("div",Se,[t("div",Ce,[t("h3",null,o(r.value.title),1),t("div",Ae,[t("div",Te,[e[55]||(e[55]=t("div",{class:"stat-label"},"Toplam GÃ¶rÃ¼ntÃ¼leme",-1)),t("div",De,o(r.value.views.toLocaleString("tr-TR")),1)]),t("div",xe,[e[56]||(e[56]=t("div",{class:"stat-label"},"Toplam TÄ±klama",-1)),t("div",Ve,o(r.value.clicks.toLocaleString("tr-TR")),1)]),t("div",ze,[e[57]||(e[57]=t("div",{class:"stat-label"},"CTR (TÄ±klama OranÄ±)",-1)),t("div",Ue,o(r.value.ctr.toFixed(2))+"%",1)]),t("div",Pe,[e[58]||(e[58]=t("div",{class:"stat-label"},"Pozisyon",-1)),t("div",Me,o(G(r.value.position)),1)])]),t("div",$e,[e[59]||(e[59]=t("strong",null,"OluÅŸturulma:",-1)),t("span",null,o(B(r.value.created_at)),1)]),r.value.start_date?(d(),i("div",Le,[e[60]||(e[60]=t("strong",null,"BaÅŸlangÄ±Ã§:",-1)),t("span",null,o(B(r.value.start_date)),1)])):u("",!0),r.value.end_date?(d(),i("div",Re,[e[61]||(e[61]=t("strong",null,"BitiÅŸ:",-1)),t("span",null,o(B(r.value.end_date)),1)])):u("",!0)])])):u("",!0)])])):u("",!0)]))}}),Ke=ot(Ge,[["__scopeId","data-v-ce134235"]]);export{Ke as default};
