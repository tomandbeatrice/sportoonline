const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/buyerApi-J9-Iqe1Y.js","assets/index-D2hY-dD-.js","assets/index-BKn9-v9I.css"])))=>i.map(i=>d[i]);
import{d as te,u as se,r as u,c as p,o as ae,b as le,e as o,f as l,g as e,i as m,w as M,j as O,z as x,h as b,O as _,t as r,M as k,F as y,k as v,n as H,p as oe,q as w,v as C,ar as f,_ as re}from"./index-D2hY-dD-.js";import{u as ie}from"./orderStore-Bw5e6OEg.js";import{u as ne,_ as de,a as R,c as ue,b as me}from"./useNotifications-BBkWSmNm.js";import"./chart-DUPVkyAx.js";const ce={class:"min-h-screen bg-gray-50"},be={class:"bg-white shadow-sm border-b"},ge={class:"container mx-auto px-4 py-4"},pe={class:"flex items-center justify-between"},xe={class:"flex items-center gap-4"},ye={class:"flex items-center gap-4"},ve={class:"container mx-auto px-4 py-8"},fe={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},he={class:"bg-white rounded-lg shadow p-6"},_e={class:"flex items-center justify-between mb-2"},ke={class:"text-3xl font-bold text-gray-900"},we={class:"bg-white rounded-lg shadow p-6"},Ce={class:"flex items-center justify-between mb-2"},Ae={class:"text-3xl font-bold text-gray-900"},Se={class:"bg-white rounded-lg shadow p-6"},De={class:"flex items-center justify-between mb-2"},Te={class:"text-3xl font-bold text-gray-900"},je={class:"bg-white rounded-lg shadow p-6"},ze={class:"flex items-center justify-between mb-2"},Ve={class:"text-3xl font-bold text-gray-900"},Be={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8"},Ee={class:"bg-white rounded-lg shadow p-6"},Fe={key:0,class:"flex h-[300px] items-center justify-center"},Ie={class:"bg-white rounded-lg shadow p-6"},Me={key:0,class:"flex h-[300px] items-center justify-center"},Oe={class:"bg-white rounded-lg shadow p-6"},He={key:0,class:"flex h-[300px] items-center justify-center"},Re={class:"bg-white rounded-lg shadow p-6"},$e={key:0,class:"flex h-[300px] items-center justify-center"},Le={class:"border-b border-gray-200 mb-6"},Ne={class:"-mb-px flex space-x-8"},Pe=["onClick"],Ue={key:0,class:"space-y-4"},Ke={key:0,class:"text-center py-12"},qe={key:1,class:"text-center py-12"},Ge={key:2},Ye={class:"flex justify-between items-start mb-4"},We={class:"font-semibold text-lg"},Je={class:"text-sm text-gray-500"},Qe={class:"space-y-3"},Xe=["src","alt"],Ze={class:"flex-1"},et={class:"font-medium line-clamp-1"},tt={class:"text-sm text-gray-500"},st={class:"text-right"},at={class:"font-semibold"},lt={class:"mt-4 pt-4 border-t flex justify-between items-center"},ot={class:"text-xl font-bold"},rt=["onClick"],it={key:1,class:"grid grid-cols-1 md:grid-cols-3 gap-6"},nt={key:0,class:"col-span-3 text-center py-12"},dt=["src","alt"],ut={class:"p-4"},mt={class:"font-semibold mb-2"},ct={class:"text-lg font-bold text-blue-600 mb-4"},bt=["onClick"],gt={key:2,class:"bg-white rounded-lg shadow p-6 max-w-2xl"},pt={key:3,class:"space-y-4"},xt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},yt={class:"flex justify-between items-start mb-2"},vt={class:"font-semibold"},ft={key:0,class:"px-2 py-1 bg-green-100 text-green-700 text-xs rounded"},ht={class:"text-sm text-gray-600 mb-4"},_t={class:"flex space-x-2"},kt=["onClick"],wt=10,jt=te({__name:"BuyerDashboard",setup(Ct){se();const D=ie(),c=u("orders"),A=u(!1),g=u({total_orders:0,total_spent:0,favorites_count:0,avg_order_value:0}),h=u([]),$=u([]),{notifications:L,unreadCount:N,markAsRead:P,markAllAsRead:U,clearAll:K}=ne(wt,"buyer"),d=u({name:"Ahmet Yilmaz",email:"buyer@sportoonline.com",phone:"+90 555 123 4567",address:"Istanbul, Turkiye"}),q=[{id:"orders",name:"Siparislerim"},{id:"favorites",name:"Favorilerim"},{id:"profile",name:"Profilim"},{id:"addresses",name:"Adreslerim"}],G=async()=>{f.success("Profil guncellendi!")},Y=a=>{f.info(`Siparis #${a} detaylari (Mock)`)},W=a=>{D.toggleFavorite({id:a}),f.success("Urun favorilerden cikarildi")},J=a=>{confirm("Bu adresi silmek istediginizden emin misiniz?")&&(S.value=S.value.filter(t=>t.id!==a))},Q=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("role"),f.success("Basariyla cikis yapildi"),window.location.href="/login"},T=u([{id:1001,status:"delivered",total:299.99,created_at:"2025-11-15",items:[{id:1,product:{name:"Nike Air Max",image_url:"https://picsum.photos/200/200?1"},quantity:1,price:299.99}]},{id:1002,status:"shipped",total:450,created_at:"2025-11-18",items:[{id:2,product:{name:"Adidas Ultraboost",image_url:"https://picsum.photos/200/200?2"},quantity:1,price:450}]}]),j=p(()=>D.favorites),S=u([{id:1,title:"Ev",fullAddress:"Kadikoy, Istanbul",isDefault:!0},{id:2,title:"Is",fullAddress:"Besiktas, Istanbul",isDefault:!1}]),X=a=>new Date(a).toLocaleDateString("tr-TR"),Z=a=>({pending:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",shipped:"bg-purple-100 text-purple-800",delivered:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[a]||"bg-gray-100 text-gray-800",z=a=>({pending:"Beklemede",processing:"Hazirlaniyor",shipped:"Kargoda",delivered:"Teslim Edildi",cancelled:"Iptal Edildi"})[a]||a,V=a=>new Intl.NumberFormat("tr-TR",{minimumFractionDigits:0,maximumFractionDigits:0}).format(a)+" ₺",B=p(()=>{if(!h.value?.length)return null;const a=["Haz","Tem","Ağu","Eyl","Eki","Kas"],t=a.map(()=>Math.floor(Math.random()*3e3)+500);return{labels:a,datasets:[{label:"Harcama (₺)",data:t,borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4,fill:!0}]}}),E=p(()=>{if(!h.value?.length)return null;const a=h.value.reduce((n,s)=>{const i=s.status||"pending";return n[i]=(n[i]||0)+1,n},{});return{labels:Object.keys(a).map(n=>z(n)),datasets:[{data:Object.values(a),backgroundColor:["rgba(34, 197, 94, 0.8)","rgba(168, 85, 247, 0.8)","rgba(59, 130, 246, 0.8)","rgba(251, 146, 60, 0.8)"],borderColor:["rgb(34, 197, 94)","rgb(168, 85, 247)","rgb(59, 130, 246)","rgb(251, 146, 60)"],borderWidth:2}]}}),F=p(()=>{const a=["Ayakkabı","Giyim","Aksesuar","Elektronik","Diğer"],t=a.map(()=>Math.floor(Math.random()*2e3)+200);return{labels:a,datasets:[{label:"Harcama (₺)",data:t,backgroundColor:["rgba(168, 85, 247, 0.8)","rgba(59, 130, 246, 0.8)","rgba(34, 197, 94, 0.8)","rgba(251, 146, 60, 0.8)","rgba(148, 163, 184, 0.8)"],borderColor:["rgb(168, 85, 247)","rgb(59, 130, 246)","rgb(34, 197, 94)","rgb(251, 146, 60)","rgb(148, 163, 184)"],borderWidth:2}]}}),I=p(()=>{const a=["Haz","Tem","Ağu","Eyl","Eki","Kas"],t=a.map(()=>Math.floor(Math.random()*10)+1);return{labels:a,datasets:[{label:"Sipariş Sayısı",data:t,borderColor:"rgb(251, 146, 60)",backgroundColor:"rgba(251, 146, 60, 0.1)",tension:.4,fill:!0}]}});async function ee(){A.value=!0;try{const{buyerApi:a}=await re(async()=>{const{buyerApi:i}=await import("./buyerApi-J9-Iqe1Y.js");return{buyerApi:i}},__vite__mapDeps([0,1,2])),[t,n,s]=await Promise.all([a.getStats(),a.getOrders(),a.getFavorites()]);g.value=t,h.value=n,$.value=s,console.log("✅ Buyer data loaded:",{stats:t,orders:n.length,favorites:s.length})}catch(a){console.error("❌ Buyer data yüklenemedi:",a),f.error("Veriler yüklenirken hata oluştu")}finally{A.value=!1}}return ae(()=>{ee()}),(a,t)=>{const n=le("router-link");return l(),o("div",ce,[e("header",be,[e("div",ge,[e("div",pe,[e("div",xe,[m(n,{to:"/dashboard",class:"text-2xl font-bold text-gray-900"},{default:M(()=>[...t[4]||(t[4]=[O(" SportoOnline ",-1)])]),_:1}),t[5]||(t[5]=e("span",{class:"rounded-full bg-green-100 px-3 py-1 text-xs font-semibold text-green-700"}," ALICI ",-1))]),e("nav",ye,[m(n,{to:"/dashboard",class:"text-sm text-gray-600 hover:text-gray-900"},{default:M(()=>[...t[6]||(t[6]=[O(" Ana Sayfa ",-1)])]),_:1}),m(de,{notifications:x(L),unreadCount:x(N),markAsRead:x(P),markAllAsRead:x(U),clearAll:x(K)},null,8,["notifications","unreadCount","markAsRead","markAllAsRead","clearAll"]),e("button",{onClick:Q,class:"rounded-lg bg-red-50 px-4 py-2 text-sm font-semibold text-red-700 hover:bg-red-100"}," Cikis ")])])])]),e("div",ve,[t[39]||(t[39]=e("h1",{class:"text-3xl font-bold mb-8"},"Hesabım",-1)),e("div",fe,[e("div",he,[e("div",_e,[t[7]||(t[7]=e("span",{class:"text-sm text-gray-500"},"Toplam Sipariş",-1)),m(_,{name:"shopping-bag",cls:"w-8 h-8 text-blue-500"})]),e("p",ke,r(g.value.total_orders||0),1),t[8]||(t[8]=e("p",{class:"text-xs text-green-600 mt-1"},"+12% bu ay",-1))]),e("div",we,[e("div",Ce,[t[9]||(t[9]=e("span",{class:"text-sm text-gray-500"},"Toplam Harcama",-1)),m(_,{name:"currency-dollar",cls:"w-8 h-8 text-green-500"})]),e("p",Ae,r(V(g.value.total_spent||0)),1),t[10]||(t[10]=e("p",{class:"text-xs text-gray-500 mt-1"},"Son 6 ay",-1))]),e("div",Se,[e("div",De,[t[11]||(t[11]=e("span",{class:"text-sm text-gray-500"},"Favoriler",-1)),m(_,{name:"heart",cls:"w-8 h-8 text-red-500"})]),e("p",Te,r(g.value.favorites_count||0),1),t[12]||(t[12]=e("p",{class:"text-xs text-gray-500 mt-1"},"Kayıtlı ürün",-1))]),e("div",je,[e("div",ze,[t[13]||(t[13]=e("span",{class:"text-sm text-gray-500"},"Ortalama Sepet",-1)),m(_,{name:"chart-bar",cls:"w-8 h-8 text-purple-500"})]),e("p",Ve,r(V(g.value.avg_order_value||0)),1),t[14]||(t[14]=e("p",{class:"text-xs text-gray-500 mt-1"},"Sipariş başına",-1))])]),e("div",Be,[e("div",Ee,[t[16]||(t[16]=e("h3",{class:"text-lg font-bold text-gray-900 mb-4"},"Harcama Trendi",-1)),t[17]||(t[17]=e("p",{class:"text-sm text-gray-500 mb-6"},"Son 6 aylık alışveriş harcamalarınız",-1)),B.value?(l(),k(R,{key:1,data:B.value,height:300},null,8,["data"])):(l(),o("div",Fe,[...t[15]||(t[15]=[e("div",{class:"text-center"},[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e("p",{class:"text-sm text-gray-400"},"Veriler yükleniyor...")],-1)])]))]),e("div",Ie,[t[19]||(t[19]=e("h3",{class:"text-lg font-bold text-gray-900 mb-4"},"Sipariş Durumları",-1)),t[20]||(t[20]=e("p",{class:"text-sm text-gray-500 mb-6"},"Siparişlerinizin güncel durumu",-1)),E.value?(l(),k(ue,{key:1,data:E.value,height:300},null,8,["data"])):(l(),o("div",Me,[...t[18]||(t[18]=[e("div",{class:"text-center"},[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto mb-4"}),e("p",{class:"text-sm text-gray-400"},"Veriler yükleniyor...")],-1)])]))]),e("div",Oe,[t[22]||(t[22]=e("h3",{class:"text-lg font-bold text-gray-900 mb-4"},"Kategori Bazlı Harcama",-1)),t[23]||(t[23]=e("p",{class:"text-sm text-gray-500 mb-6"},"En çok harcama yaptığınız kategoriler",-1)),F.value?(l(),k(me,{key:1,data:F.value,height:300},null,8,["data"])):(l(),o("div",He,[...t[21]||(t[21]=[e("div",{class:"text-center"},[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"}),e("p",{class:"text-sm text-gray-400"},"Veriler yükleniyor...")],-1)])]))]),e("div",Re,[t[25]||(t[25]=e("h3",{class:"text-lg font-bold text-gray-900 mb-4"},"Aylık Sipariş Sayısı",-1)),t[26]||(t[26]=e("p",{class:"text-sm text-gray-500 mb-6"},"Son 6 aylık sipariş aktivitesi",-1)),I.value?(l(),k(R,{key:1,data:I.value,height:300},null,8,["data"])):(l(),o("div",$e,[...t[24]||(t[24]=[e("div",{class:"text-center"},[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600 mx-auto mb-4"}),e("p",{class:"text-sm text-gray-400"},"Veriler yükleniyor...")],-1)])]))])]),e("div",Le,[e("nav",Ne,[(l(),o(y,null,v(q,s=>e("button",{key:s.id,onClick:i=>c.value=s.id,class:H(["py-4 px-1 border-b-2 font-medium text-sm",c.value===s.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},r(s.name),11,Pe)),64))])]),c.value==="orders"?(l(),o("div",Ue,[A.value?(l(),o("div",Ke,[...t[27]||(t[27]=[e("p",{class:"text-gray-500"},"Yukleniyor...",-1)])])):T.value.length===0?(l(),o("div",qe,[...t[28]||(t[28]=[e("p",{class:"text-gray-500"},"Henuz siparisiniz yok.",-1)])])):(l(),o("div",Ge,[(l(!0),o(y,null,v(T.value,s=>(l(),o("div",{key:s.id,class:"bg-white rounded-lg shadow p-6"},[e("div",Ye,[e("div",null,[e("h3",We,"Siparis #"+r(s.id),1),e("p",Je,r(X(s.created_at)),1)]),e("span",{class:H(["px-3 py-1 rounded-full text-sm font-medium",Z(s.status)])},r(z(s.status)),3)]),e("div",Qe,[(l(!0),o(y,null,v(s.items,i=>(l(),o("div",{key:i.id,class:"flex items-center space-x-4"},[e("img",{src:i.product.image_url,alt:i.product.name,class:"h-20 w-20 rounded object-cover"},null,8,Xe),e("div",Ze,[e("h4",et,r(i.product.name),1),e("p",tt,"Adet: "+r(i.quantity),1)]),e("div",st,[e("p",at,r(i.price)+" TL",1)])]))),128))]),e("div",lt,[e("div",null,[t[29]||(t[29]=e("p",{class:"text-sm text-gray-600"},"Toplam",-1)),e("p",ot,r(s.total)+" TL",1)]),e("button",{onClick:i=>Y(s.id),class:"px-4 py-2 border border-blue-600 text-blue-600 rounded hover:bg-blue-50"}," Detaylari Gor ",8,rt)])]))),128))]))])):b("",!0),c.value==="favorites"?(l(),o("div",it,[j.value.length===0?(l(),o("div",nt,[...t[30]||(t[30]=[e("p",{class:"text-gray-500"},"Favori urunuz yok.",-1)])])):b("",!0),(l(!0),o(y,null,v(j.value,s=>(l(),o("div",{key:s.id,class:"bg-white rounded-lg shadow overflow-hidden"},[e("img",{src:s.image_url,alt:s.name,class:"w-full h-48 object-cover"},null,8,dt),e("div",ut,[e("h3",mt,r(s.name),1),e("p",ct,r(s.price)+" TL",1),e("button",{onClick:i=>W(s.id),class:"w-full px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700"}," Favorilerden Cikar ",8,bt)])]))),128))])):b("",!0),c.value==="profile"?(l(),o("div",gt,[t[36]||(t[36]=e("h2",{class:"text-2xl font-bold mb-6"},"Profil Bilgileri",-1)),e("form",{onSubmit:oe(G,["prevent"]),class:"space-y-4"},[e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Ad Soyad",-1)),w(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>d.value.name=s),type:"text",class:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"},null,512),[[C,d.value.name]])]),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Email",-1)),w(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>d.value.email=s),type:"email",class:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"},null,512),[[C,d.value.email]])]),e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Telefon",-1)),w(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>d.value.phone=s),type:"tel",class:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"},null,512),[[C,d.value.phone]])]),e("div",null,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Adres",-1)),w(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=s=>d.value.address=s),rows:"3",class:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"},null,512),[[C,d.value.address]])]),t[35]||(t[35]=e("button",{type:"submit",class:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"}," Guncelle ",-1))],32)])):b("",!0),c.value==="addresses"?(l(),o("div",pt,[t[38]||(t[38]=e("div",{class:"flex justify-between items-center mb-4"},[e("h2",{class:"text-2xl font-bold"},"Teslimat Adresleri"),e("button",{class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"}," Yeni Adres Ekle ")],-1)),e("div",xt,[(l(!0),o(y,null,v(S.value,s=>(l(),o("div",{key:s.id,class:"bg-white rounded-lg shadow p-6"},[e("div",yt,[e("h3",vt,r(s.title),1),s.isDefault?(l(),o("span",ft," Varsayilan ")):b("",!0)]),e("p",ht,r(s.fullAddress),1),e("div",_t,[t[37]||(t[37]=e("button",{class:"px-3 py-1 text-sm border border-blue-600 text-blue-600 rounded hover:bg-blue-50"}," Duzenle ",-1)),e("button",{onClick:i=>J(s.id),class:"px-3 py-1 text-sm border border-red-600 text-red-600 rounded hover:bg-red-50"}," Sil ",8,kt)])]))),128))])])):b("",!0)])])}}});export{jt as default};
