import{d as E,u as T,r as u,E as f,b as A,e as s,f as r,g as t,h as c,t as m,q as g,v as k,n as b,G as K,j as y,p as M,i as R,w as N,D as U}from"./index-D2hY-dD-.js";const q={class:"register max-w-md mx-auto p-8 bg-white rounded-lg shadow mt-10"},B={key:0,class:"bg-red-100 text-red-700 p-3 rounded mb-4"},G={key:1,class:"bg-green-100 text-green-700 p-3 rounded mb-4"},S={key:0,class:"text-red-500 text-sm mt-1"},j={key:0,class:"text-red-500 text-sm mt-1"},D={key:0,class:"text-red-500 text-sm mt-1"},O={key:0,class:"text-red-500 text-sm mt-1"},F={class:"flex items-center gap-2 text-sm"},H={key:0,class:"text-red-500 text-sm mt-1"},L=["disabled"],P={key:0,class:"flex items-center justify-center gap-2"},W={key:1},Y={class:"mt-4 text-center text-sm text-slate-600"},I=E({__name:"Register",setup(Z){const z=T(),i=u(""),d=u(""),o=u(""),v=u(""),h=u(!1),p=u(""),x=u(""),w=u(!1),a=u({});f.autoDetectMockAuth();function C(){a.value={};let l=!0;return!i.value||i.value.trim().length===0?(a.value.name="Ad Soyad zorunludur",l=!1):i.value.length<3&&(a.value.name="Ad Soyad en az 3 karakter olmalƒ±dƒ±r",l=!1),!d.value||d.value.trim().length===0?(a.value.email="Email adresi zorunludur",l=!1):/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(d.value)||(a.value.email="Ge√ßerli bir email adresi girin",l=!1),!o.value||o.value.length===0?(a.value.password="≈ûifre zorunludur",l=!1):o.value.length<8&&(a.value.password="≈ûifre en az 8 karakter olmalƒ±dƒ±r",l=!1),v.value?o.value!==v.value&&(a.value.passwordConfirm="≈ûifreler e≈üle≈ümiyor",l=!1):(a.value.passwordConfirm="≈ûifre tekrarƒ± zorunludur",l=!1),h.value||(a.value.acceptTerms="Kullanƒ±m ko≈üullarƒ±nƒ± kabul etmelisiniz",l=!1),l}async function V(){if(p.value="",x.value="",!!C()){w.value=!0;try{let l;if(f.isMockAuthEnabled())console.log("üé≠ Using Mock Auth for registration"),l={data:await f.mockRegister(i.value,d.value,o.value)};else try{l=await U.post("/api/register",{name:i.value,email:d.value,password:o.value,password_confirmation:v.value})}catch(e){if(e.code==="ERR_NETWORK"||e.message==="Network Error")console.warn("‚ö†Ô∏è Backend not available, falling back to mock auth"),f.enableMockAuth(),l={data:await f.mockRegister(i.value,d.value,o.value)};else throw e}x.value="Kayƒ±t ba≈üarƒ±lƒ±! Giri≈ü sayfasƒ±na y√∂nlendiriliyorsunuz...",setTimeout(()=>{z.push("/login")},2e3)}catch(l){if(console.error("‚ùå Register error:",l),l.response?.data?.errors){const e=l.response.data.errors;p.value=Object.values(e).flat().join(", ")}else p.value=l.message||l.response?.data?.message||"Kayƒ±t ba≈üarƒ±sƒ±z. L√ºtfen bilgilerinizi kontrol edin."}finally{w.value=!1}}}return(l,e)=>{const _=A("router-link");return r(),s("div",q,[e[9]||(e[9]=t("h2",{class:"text-2xl font-bold mb-6"},"Kayƒ±t Ol",-1)),p.value?(r(),s("div",B,m(p.value),1)):c("",!0),x.value?(r(),s("div",G,m(x.value),1)):c("",!0),t("form",{onSubmit:M(V,["prevent"]),class:"space-y-4"},[t("div",null,[g(t("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>i.value=n),placeholder:"Ad Soyad",type:"text",required:"",autocomplete:"name",class:b(["w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-green-500",{"border-red-500":a.value?.name}])},null,2),[[k,i.value]]),a.value?.name?(r(),s("p",S,m(a.value.name),1)):c("",!0)]),t("div",null,[g(t("input",{"onUpdate:modelValue":e[1]||(e[1]=n=>d.value=n),placeholder:"Email",type:"email",required:"",autocomplete:"username",class:b(["w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-green-500",{"border-red-500":a.value?.email}])},null,2),[[k,d.value]]),a.value?.email?(r(),s("p",j,m(a.value.email),1)):c("",!0)]),t("div",null,[g(t("input",{"onUpdate:modelValue":e[2]||(e[2]=n=>o.value=n),placeholder:"≈ûifre",type:"password",required:"",autocomplete:"new-password",class:b(["w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-green-500",{"border-red-500":a.value?.password}])},null,2),[[k,o.value]]),a.value?.password?(r(),s("p",D,m(a.value.password),1)):c("",!0)]),t("div",null,[g(t("input",{"onUpdate:modelValue":e[3]||(e[3]=n=>v.value=n),placeholder:"≈ûifre Tekrar",type:"password",required:"",autocomplete:"new-password",class:b(["w-full px-4 py-2 border rounded focus:outline-none focus:ring-2 focus:ring-green-500",{"border-red-500":a.value?.passwordConfirm}])},null,2),[[k,v.value]]),a.value?.passwordConfirm?(r(),s("p",O,m(a.value.passwordConfirm),1)):c("",!0)]),t("div",null,[t("label",F,[g(t("input",{"onUpdate:modelValue":e[4]||(e[4]=n=>h.value=n),type:"checkbox",class:b(["w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500",{"border-red-500":a.value?.acceptTerms}])},null,2),[[K,h.value]]),e[5]||(e[5]=t("span",null,[t("a",{href:"/terms",target:"_blank",class:"text-blue-600 hover:text-blue-700"},"Kullanƒ±m Ko≈üullarƒ±"),y("'nƒ± ve "),t("a",{href:"/privacy",target:"_blank",class:"text-blue-600 hover:text-blue-700"},"Gizlilik Politikasƒ±"),y("'nƒ± kabul ediyorum ")],-1))]),a.value?.acceptTerms?(r(),s("p",H,m(a.value.acceptTerms),1)):c("",!0)]),t("button",{type:"submit",disabled:w.value,class:"w-full py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:bg-gray-400 transition-colors"},[w.value?(r(),s("span",P,[...e[6]||(e[6]=[t("svg",{class:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),y(" Kayƒ±t yapƒ±lƒ±yor... ",-1)])])):(r(),s("span",W,"Kayƒ±t Ol"))],8,L)],32),t("div",Y,[e[8]||(e[8]=y(" Zaten hesabƒ±nƒ±z var mƒ±? ",-1)),R(_,{to:"/login",class:"text-blue-600 hover:text-blue-700 font-medium"},{default:N(()=>[...e[7]||(e[7]=[y("Giri≈ü Yap",-1)])]),_:1})])])}}});export{I as default};
